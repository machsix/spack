

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>spack.environment package &mdash; Spack 0.23.1 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=5f00b823" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="_static/graphviz.css?v=4ae1632d" />
      <link rel="stylesheet" type="text/css" href="_static/sphinx-design.min.css?v=95c83b7e" />

  
    <link rel="shortcut icon" href="_static/favicon.ico"/>
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=832b3b9f"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="_static/design-tabs.js?v=f930bc37"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="spack.hooks package" href="spack.hooks.html" />
    <link rel="prev" title="spack.detection package" href="spack.detection.html" /> 
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-S0PQ7WV75K"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-S0PQ7WV75K');
  </script>

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html">
            
              <img src="_static/spack-logo-white-text.svg" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Basics</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="features.html">Feature Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="basic_usage.html">Basic Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="replace_conda_homebrew.html">Spack for Homebrew/Conda Users</a></li>
<li class="toctree-l1"><a class="reference internal" href="frequently_asked_questions.html">Frequently Asked Questions</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Links</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://spack-tutorial.readthedocs.io">Tutorial (spack-tutorial.rtfd.io)</a></li>
<li class="toctree-l1"><a class="reference external" href="https://packages.spack.io">Packages (packages.spack.io)</a></li>
<li class="toctree-l1"><a class="reference external" href="https://cache.spack.io">Binaries (binaries.spack.io)</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="configuration.html">Configuration Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="config_yaml.html">Spack Settings (config.yaml)</a></li>
<li class="toctree-l1"><a class="reference internal" href="packages_yaml.html">Package Settings (packages.yaml)</a></li>
<li class="toctree-l1"><a class="reference internal" href="build_settings.html">Concretization Settings (concretizer.yaml)</a></li>
<li class="toctree-l1"><a class="reference internal" href="environments.html">Environments (spack.yaml, spack.lock)</a></li>
<li class="toctree-l1"><a class="reference internal" href="containers.html">Container Images</a></li>
<li class="toctree-l1"><a class="reference internal" href="mirrors.html">Mirrors (mirrors.yaml)</a></li>
<li class="toctree-l1"><a class="reference internal" href="module_file_support.html">Modules (modules.yaml)</a></li>
<li class="toctree-l1"><a class="reference internal" href="repositories.html">Package Repositories (repos.yaml)</a></li>
<li class="toctree-l1"><a class="reference internal" href="binary_caches.html">Build Caches</a></li>
<li class="toctree-l1"><a class="reference internal" href="bootstrapping.html">Bootstrapping</a></li>
<li class="toctree-l1"><a class="reference internal" href="command_index.html">Command Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="chain.html">Chaining Spack Installations (upstreams.yaml)</a></li>
<li class="toctree-l1"><a class="reference internal" href="extensions.html">Custom Extensions</a></li>
<li class="toctree-l1"><a class="reference internal" href="pipelines.html">CI Pipelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="signing.html">Spack Package Signing</a></li>
<li class="toctree-l1"><a class="reference internal" href="gpu_configuration.html">Using External GPU Support</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Contributing</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="contribution_guide.html">Contribution Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="packaging_guide.html">Packaging Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="build_systems.html">Build Systems</a></li>
<li class="toctree-l1"><a class="reference internal" href="developer_guide.html">Developer Guide</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API Docs</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="spack.html">Spack API Docs</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="spack.html#spack.get_short_version"><code class="docutils literal notranslate"><span class="pre">get_short_version()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="spack.html#spack.get_spack_commit"><code class="docutils literal notranslate"><span class="pre">get_spack_commit()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="spack.html#spack.get_version"><code class="docutils literal notranslate"><span class="pre">get_version()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="spack.html#spack.spack_version_info"><code class="docutils literal notranslate"><span class="pre">spack_version_info</span></code></a></li>
<li class="toctree-l2 current"><a class="reference internal" href="spack.html#subpackages">Subpackages</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="spack.bootstrap.html">spack.bootstrap package</a></li>
<li class="toctree-l3"><a class="reference internal" href="spack.build_systems.html">spack.build_systems package</a></li>
<li class="toctree-l3"><a class="reference internal" href="spack.cmd.html">spack.cmd package</a></li>
<li class="toctree-l3"><a class="reference internal" href="spack.compilers.html">spack.compilers package</a></li>
<li class="toctree-l3"><a class="reference internal" href="spack.container.html">spack.container package</a></li>
<li class="toctree-l3"><a class="reference internal" href="spack.detection.html">spack.detection package</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">spack.environment package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#spack-lock-format"><cite>spack.lock</cite> format</a></li>
<li class="toctree-l4"><a class="reference internal" href="#spack.environment.Environment"><code class="docutils literal notranslate"><span class="pre">Environment</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#spack.environment.SpackEnvironmentConfigError"><code class="docutils literal notranslate"><span class="pre">SpackEnvironmentConfigError</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#spack.environment.SpackEnvironmentError"><code class="docutils literal notranslate"><span class="pre">SpackEnvironmentError</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#spack.environment.SpackEnvironmentViewError"><code class="docutils literal notranslate"><span class="pre">SpackEnvironmentViewError</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#spack.environment.activate"><code class="docutils literal notranslate"><span class="pre">activate()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#spack.environment.active"><code class="docutils literal notranslate"><span class="pre">active()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#spack.environment.active_environment"><code class="docutils literal notranslate"><span class="pre">active_environment()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#spack.environment.all_environment_names"><code class="docutils literal notranslate"><span class="pre">all_environment_names()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#spack.environment.all_environments"><code class="docutils literal notranslate"><span class="pre">all_environments()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#spack.environment.as_env_dir"><code class="docutils literal notranslate"><span class="pre">as_env_dir()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#spack.environment.create"><code class="docutils literal notranslate"><span class="pre">create()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#spack.environment.create_in_dir"><code class="docutils literal notranslate"><span class="pre">create_in_dir()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#spack.environment.deactivate"><code class="docutils literal notranslate"><span class="pre">deactivate()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#spack.environment.default_manifest_yaml"><code class="docutils literal notranslate"><span class="pre">default_manifest_yaml()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#spack.environment.display_specs"><code class="docutils literal notranslate"><span class="pre">display_specs()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#spack.environment.environment_dir_from_name"><code class="docutils literal notranslate"><span class="pre">environment_dir_from_name()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#spack.environment.environment_from_name_or_dir"><code class="docutils literal notranslate"><span class="pre">environment_from_name_or_dir()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#spack.environment.exists"><code class="docutils literal notranslate"><span class="pre">exists()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#spack.environment.initialize_environment_dir"><code class="docutils literal notranslate"><span class="pre">initialize_environment_dir()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#spack.environment.installed_specs"><code class="docutils literal notranslate"><span class="pre">installed_specs()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#spack.environment.is_env_dir"><code class="docutils literal notranslate"><span class="pre">is_env_dir()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#spack.environment.is_latest_format"><code class="docutils literal notranslate"><span class="pre">is_latest_format()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#spack.environment.manifest_file"><code class="docutils literal notranslate"><span class="pre">manifest_file()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#spack.environment.no_active_environment"><code class="docutils literal notranslate"><span class="pre">no_active_environment()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#spack.environment.read"><code class="docutils literal notranslate"><span class="pre">read()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#spack.environment.root"><code class="docutils literal notranslate"><span class="pre">root()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#spack.environment.update_yaml"><code class="docutils literal notranslate"><span class="pre">update_yaml()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#submodules">Submodules</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-spack.environment.depfile">spack.environment.depfile module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-spack.environment.environment">spack.environment.environment module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-spack.environment.shell">spack.environment.shell module</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="spack.hooks.html">spack.hooks package</a></li>
<li class="toctree-l3"><a class="reference internal" href="spack.modules.html">spack.modules package</a></li>
<li class="toctree-l3"><a class="reference internal" href="spack.oci.html">spack.oci package</a></li>
<li class="toctree-l3"><a class="reference internal" href="spack.operating_systems.html">spack.operating_systems package</a></li>
<li class="toctree-l3"><a class="reference internal" href="spack.platforms.html">spack.platforms package</a></li>
<li class="toctree-l3"><a class="reference internal" href="spack.reporters.html">spack.reporters package</a></li>
<li class="toctree-l3"><a class="reference internal" href="spack.schema.html">spack.schema package</a></li>
<li class="toctree-l3"><a class="reference internal" href="spack.solver.html">spack.solver package</a></li>
<li class="toctree-l3"><a class="reference internal" href="spack.util.html">spack.util package</a></li>
<li class="toctree-l3"><a class="reference internal" href="spack.version.html">spack.version package</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="spack.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="spack.html#module-spack.audit">spack.audit module</a></li>
<li class="toctree-l2"><a class="reference internal" href="spack.html#module-spack.binary_distribution">spack.binary_distribution module</a></li>
<li class="toctree-l2"><a class="reference internal" href="spack.html#module-spack.build_environment">spack.build_environment module</a></li>
<li class="toctree-l2"><a class="reference internal" href="spack.html#module-spack.builder">spack.builder module</a></li>
<li class="toctree-l2"><a class="reference internal" href="spack.html#module-spack.caches">spack.caches module</a></li>
<li class="toctree-l2"><a class="reference internal" href="spack.html#module-spack.ci">spack.ci module</a></li>
<li class="toctree-l2"><a class="reference internal" href="spack.html#module-spack.compiler">spack.compiler module</a></li>
<li class="toctree-l2"><a class="reference internal" href="spack.html#module-spack.concretize">spack.concretize module</a></li>
<li class="toctree-l2"><a class="reference internal" href="spack.html#module-spack.config">spack.config module</a></li>
<li class="toctree-l2"><a class="reference internal" href="spack.html#module-spack.context">spack.context module</a></li>
<li class="toctree-l2"><a class="reference internal" href="spack.html#module-spack.cray_manifest">spack.cray_manifest module</a></li>
<li class="toctree-l2"><a class="reference internal" href="spack.html#module-spack.database">spack.database module</a></li>
<li class="toctree-l2"><a class="reference internal" href="spack.html#module-spack.dependency">spack.dependency module</a></li>
<li class="toctree-l2"><a class="reference internal" href="spack.html#module-spack.deptypes">spack.deptypes module</a></li>
<li class="toctree-l2"><a class="reference internal" href="spack.html#module-spack.directives">spack.directives module</a></li>
<li class="toctree-l2"><a class="reference internal" href="spack.html#module-spack.directives_meta">spack.directives_meta module</a></li>
<li class="toctree-l2"><a class="reference internal" href="spack.html#module-spack.directory_layout">spack.directory_layout module</a></li>
<li class="toctree-l2"><a class="reference internal" href="spack.html#module-spack.error">spack.error module</a></li>
<li class="toctree-l2"><a class="reference internal" href="spack.html#module-spack.extensions">spack.extensions module</a></li>
<li class="toctree-l2"><a class="reference internal" href="spack.html#module-spack.fetch_strategy">spack.fetch_strategy module</a></li>
<li class="toctree-l2"><a class="reference internal" href="spack.html#module-spack.filesystem_view">spack.filesystem_view module</a></li>
<li class="toctree-l2"><a class="reference internal" href="spack.html#module-spack.graph">spack.graph module</a></li>
<li class="toctree-l2"><a class="reference internal" href="spack.html#module-spack.hash_types">spack.hash_types module</a></li>
<li class="toctree-l2"><a class="reference internal" href="spack.html#module-spack.install_test">spack.install_test module</a></li>
<li class="toctree-l2"><a class="reference internal" href="spack.html#module-spack.installer">spack.installer module</a></li>
<li class="toctree-l2"><a class="reference internal" href="spack.html#module-spack.main">spack.main module</a></li>
<li class="toctree-l2"><a class="reference internal" href="spack.html#module-spack.mirror">spack.mirror module</a></li>
<li class="toctree-l2"><a class="reference internal" href="spack.html#module-spack.mixins">spack.mixins module</a></li>
<li class="toctree-l2"><a class="reference internal" href="spack.html#module-spack.multimethod">spack.multimethod module</a></li>
<li class="toctree-l2"><a class="reference internal" href="spack.html#module-spack.package">spack.package module</a></li>
<li class="toctree-l2"><a class="reference internal" href="spack.html#module-spack.package_base">spack.package_base module</a></li>
<li class="toctree-l2"><a class="reference internal" href="spack.html#module-spack.package_completions">spack.package_completions module</a></li>
<li class="toctree-l2"><a class="reference internal" href="spack.html#module-spack.package_prefs">spack.package_prefs module</a></li>
<li class="toctree-l2"><a class="reference internal" href="spack.html#module-spack.package_test">spack.package_test module</a></li>
<li class="toctree-l2"><a class="reference internal" href="spack.html#module-spack.parser">spack.parser module</a></li>
<li class="toctree-l2"><a class="reference internal" href="spack.html#module-spack.patch">spack.patch module</a></li>
<li class="toctree-l2"><a class="reference internal" href="spack.html#module-spack.paths">spack.paths module</a></li>
<li class="toctree-l2"><a class="reference internal" href="spack.html#module-spack.projections">spack.projections module</a></li>
<li class="toctree-l2"><a class="reference internal" href="spack.html#module-spack.provider_index">spack.provider_index module</a></li>
<li class="toctree-l2"><a class="reference internal" href="spack.html#module-spack.relocate">spack.relocate module</a></li>
<li class="toctree-l2"><a class="reference internal" href="spack.html#module-spack.relocate_text">spack.relocate_text module</a></li>
<li class="toctree-l2"><a class="reference internal" href="spack.html#module-spack.repo">spack.repo module</a></li>
<li class="toctree-l2"><a class="reference internal" href="spack.html#module-spack.report">spack.report module</a></li>
<li class="toctree-l2"><a class="reference internal" href="spack.html#module-spack.resource">spack.resource module</a></li>
<li class="toctree-l2"><a class="reference internal" href="spack.html#module-spack.rewiring">spack.rewiring module</a></li>
<li class="toctree-l2"><a class="reference internal" href="spack.html#module-spack.spec">spack.spec module</a></li>
<li class="toctree-l2"><a class="reference internal" href="spack.html#module-spack.spec_list">spack.spec_list module</a></li>
<li class="toctree-l2"><a class="reference internal" href="spack.html#module-spack.stage">spack.stage module</a></li>
<li class="toctree-l2"><a class="reference internal" href="spack.html#module-spack.store">spack.store module</a></li>
<li class="toctree-l2"><a class="reference internal" href="spack.html#module-spack.subprocess_context">spack.subprocess_context module</a></li>
<li class="toctree-l2"><a class="reference internal" href="spack.html#module-spack.tag">spack.tag module</a></li>
<li class="toctree-l2"><a class="reference internal" href="spack.html#module-spack.tengine">spack.tengine module</a></li>
<li class="toctree-l2"><a class="reference internal" href="spack.html#module-spack.traverse">spack.traverse module</a></li>
<li class="toctree-l2"><a class="reference internal" href="spack.html#module-spack.url">spack.url module</a></li>
<li class="toctree-l2"><a class="reference internal" href="spack.html#module-spack.user_environment">spack.user_environment module</a></li>
<li class="toctree-l2"><a class="reference internal" href="spack.html#module-spack.variant">spack.variant module</a></li>
<li class="toctree-l2"><a class="reference internal" href="spack.html#module-spack.verify">spack.verify module</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="llnl.html">LLNL API Docs</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Spack</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="spack.html">spack package</a></li>
      <li class="breadcrumb-item active">spack.environment package</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/spack.environment.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="module-spack.environment">
<span id="spack-environment-package"></span><h1>spack.environment package<a class="headerlink" href="#module-spack.environment" title="Link to this heading"></a></h1>
<p>This package implements Spack environments.</p>
<section id="spack-lock-format">
<span id="lockfile-format"></span><h2><cite>spack.lock</cite> format<a class="headerlink" href="#spack-lock-format" title="Link to this heading"></a></h2>
<p>Spack environments have existed since Spack <code class="docutils literal notranslate"><span class="pre">v0.12.0</span></code>, and there have been 4 different
<code class="docutils literal notranslate"><span class="pre">spack.lock</span></code> formats since then. The formats are documented here.</p>
<p>The high-level format of a Spack lockfile hasn’t changed much between versions, but the
contents have.  Lockfiles are JSON-formatted and their top-level sections are:</p>
<blockquote>
<div><ol class="arabic simple">
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">_meta</span></code> (object): this contains details about the file format, including:</dt><dd><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">file-type</span></code>: always <code class="docutils literal notranslate"><span class="pre">&quot;spack-lockfile&quot;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">lockfile-version</span></code>: an integer representing the lockfile format version</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">specfile-version</span></code>: an integer representing the spec format version (since
<code class="docutils literal notranslate"><span class="pre">v0.17</span></code>)</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">spack</span></code> (object): optional, this identifies information about Spack</dt><dd><p>used to concretize the environment:
* <code class="docutils literal notranslate"><span class="pre">type</span></code>: required, identifies form Spack version took (e.g., <code class="docutils literal notranslate"><span class="pre">git</span></code>, <code class="docutils literal notranslate"><span class="pre">release</span></code>)
* <code class="docutils literal notranslate"><span class="pre">commit</span></code>: the commit if the version is from git
* <code class="docutils literal notranslate"><span class="pre">version</span></code>: the Spack version</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">roots</span></code> (list): an ordered list of records representing the roots of the Spack</dt><dd><p>environment. Each has two fields:
* <code class="docutils literal notranslate"><span class="pre">hash</span></code>: a Spack spec hash uniquely identifying the concrete root spec
* <code class="docutils literal notranslate"><span class="pre">spec</span></code>: a string representation of the abstract spec that was concretized</p>
</dd>
</dl>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">concrete_specs</span></code>: a dictionary containing the specs in the environment.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">include_concrete</span></code> (dictionary): an optional dictionary that includes the roots
and concrete specs from the included environments, keyed by the path to that
environment</p></li>
</ol>
</div></blockquote>
<section id="compatibility">
<h3>Compatibility<a class="headerlink" href="#compatibility" title="Link to this heading"></a></h3>
<p>New versions of Spack can (so far) read all old lockfile formats – they are
backward-compatible. Old versions cannot read new lockfile formats, and you’ll need to
upgrade Spack to use them.</p>
<table class="docutils align-default" id="id1">
<caption><span class="caption-text">Lockfile version compatibility across Spack versions</span><a class="headerlink" href="#id1" title="Link to this table"></a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Spack version</p></th>
<th class="head"><p><code class="docutils literal notranslate"><span class="pre">v1</span></code></p></th>
<th class="head"><p><code class="docutils literal notranslate"><span class="pre">v2</span></code></p></th>
<th class="head"><p><code class="docutils literal notranslate"><span class="pre">v3</span></code></p></th>
<th class="head"><p><code class="docutils literal notranslate"><span class="pre">v4</span></code></p></th>
<th class="head"><p><code class="docutils literal notranslate"><span class="pre">v5</span></code></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">v0.12:0.14</span></code></p></td>
<td><p>✅</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">v0.15:0.16</span></code></p></td>
<td><p>✅</p></td>
<td><p>✅</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">v0.17</span></code></p></td>
<td><p>✅</p></td>
<td><p>✅</p></td>
<td><p>✅</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">v0.18:</span></code></p></td>
<td><p>✅</p></td>
<td><p>✅</p></td>
<td><p>✅</p></td>
<td><p>✅</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">v0.22:</span></code></p></td>
<td><p>✅</p></td>
<td><p>✅</p></td>
<td><p>✅</p></td>
<td><p>✅</p></td>
<td><p>✅</p></td>
</tr>
</tbody>
</table>
</section>
<section id="version-1">
<h3>Version 1<a class="headerlink" href="#version-1" title="Link to this heading"></a></h3>
<p>When lockfiles were first created, there was only one hash in Spack: the DAG hash. This
DAG hash (we’ll call it the old DAG hash) did <em>not</em> include build dependencies – it
only included transitive link and run dependencies.</p>
<p>The spec format at this time was keyed by name. Each spec started with a key for its
name, whose value was a dictionary of other spec attributes. The lockfile put these
name-keyed specs into dictionaries keyed by their DAG hash, and the spec records did not
actually have a “hash” field in the lockfile – you have to associate the hash from the
key with the spec record after the fact.</p>
<p>Dependencies in original lockfiles were keyed by <code class="docutils literal notranslate"><span class="pre">&quot;hash&quot;</span></code>, i.e. the old DAG hash.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;_meta&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;file-type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;spack-lockfile&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;lockfile-version&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;roots&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;hash&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;old_dag_hash 1&gt;&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;spec&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;abstract spec 1&gt;&quot;</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;hash&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;old_dag_hash 2&gt;&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;spec&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;abstract spec 2&gt;&quot;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">],</span>
<span class="w">    </span><span class="nt">&quot;concrete_specs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;&lt;old_dag_hash 1&gt;&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;... &lt;spec dict attributes&gt; ...&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">},</span>
<span class="w">            </span><span class="nt">&quot;dependencies&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;depname_1&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;hash&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;old_dag_hash for depname_1&gt;&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;build&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;link&quot;</span><span class="p">]</span>
<span class="w">                </span><span class="p">},</span>
<span class="w">                </span><span class="nt">&quot;depname_2&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;hash&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;old_dag_hash for depname_3&gt;&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;build&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;link&quot;</span><span class="p">]</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">            </span><span class="nt">&quot;hash&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;old_dag_hash 1&gt;&quot;</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nt">&quot;&lt;old_dag_hash 2&gt;&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;... &lt;spec dict attributes&gt; ...&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">},</span>
<span class="w">            </span><span class="nt">&quot;dependencies&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;depname_3&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;hash&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;old_dag_hash for depname_3&gt;&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;build&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;link&quot;</span><span class="p">]</span>
<span class="w">                </span><span class="p">},</span>
<span class="w">                </span><span class="nt">&quot;depname_4&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;hash&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;old_dag_hash for depname_4&gt;&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;build&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;link&quot;</span><span class="p">]</span>
<span class="w">                </span><span class="p">},</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">            </span><span class="nt">&quot;hash&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;old_dag_hash 2&gt;&quot;</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="version-2">
<h3>Version 2<a class="headerlink" href="#version-2" title="Link to this heading"></a></h3>
<p>Version 2 changes one thing: specs in the lockfile are now keyed by <code class="docutils literal notranslate"><span class="pre">build_hash</span></code>
instead of the old <code class="docutils literal notranslate"><span class="pre">dag_hash</span></code>. Specs have a <code class="docutils literal notranslate"><span class="pre">hash</span></code> attribute with their real DAG
hash, so you can’t go by the dictionary key anymore to identify a spec – you have to
read it in and look at <code class="docutils literal notranslate"><span class="pre">&quot;hash&quot;</span></code>. Dependencies are still keyed by old DAG hash.</p>
<p>Even though we key lockfiles by <code class="docutils literal notranslate"><span class="pre">build_hash</span></code>, specs in Spack were still deployed with
the old, coarser DAG hash. This means that in v2 and v3 lockfiles (which are keyed by
build hash), there may be multiple versions of the same spec with different build
dependencies, which means they will have different build hashes but the same DAG hash.
Spack would only have been able to actually install one of these.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;_meta&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;file-type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;spack-lockfile&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;lockfile-version&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;roots&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;hash&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;build_hash 1&gt;&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;spec&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;abstract spec 1&gt;&quot;</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;hash&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;build_hash 2&gt;&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;spec&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;abstract spec 2&gt;&quot;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">],</span>
<span class="w">    </span><span class="nt">&quot;concrete_specs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;&lt;build_hash 1&gt;&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;... &lt;spec dict attributes&gt; ...&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">},</span>
<span class="w">            </span><span class="nt">&quot;dependencies&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;depname_1&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;hash&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;old_dag_hash for depname_1&gt;&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;build&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;link&quot;</span><span class="p">]</span>
<span class="w">                </span><span class="p">},</span>
<span class="w">                </span><span class="nt">&quot;depname_2&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;hash&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;old_dag_hash for depname_3&gt;&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;build&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;link&quot;</span><span class="p">]</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">            </span><span class="nt">&quot;hash&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;old_dag_hash 1&gt;&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nt">&quot;&lt;build_hash 2&gt;&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;... &lt;spec dict attributes&gt; ...&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">},</span>
<span class="w">            </span><span class="nt">&quot;dependencies&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;depname_3&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;hash&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;old_dag_hash for depname_3&gt;&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;build&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;link&quot;</span><span class="p">]</span>
<span class="w">                </span><span class="p">},</span>
<span class="w">                </span><span class="nt">&quot;depname_4&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;hash&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;old_dag_hash for depname_4&gt;&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;build&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;link&quot;</span><span class="p">]</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">            </span><span class="nt">&quot;hash&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;old_dag_hash 2&gt;&quot;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="version-3">
<h3>Version 3<a class="headerlink" href="#version-3" title="Link to this heading"></a></h3>
<p>Version 3 doesn’t change the top-level lockfile format, but this was when we changed the
specfile format. Specs in <code class="docutils literal notranslate"><span class="pre">concrete_specs</span></code> are now keyed by the build hash, with no
inner dictionary keyed by their package name. The package name is in a <code class="docutils literal notranslate"><span class="pre">name</span></code> field
inside each spec dictionary. The <code class="docutils literal notranslate"><span class="pre">dependencies</span></code> field in the specs is a list instead
of a dictionary, and each element of the list is a record with the name, dependency
types, and hash of the dependency. Instead of a key called <code class="docutils literal notranslate"><span class="pre">hash</span></code>, dependencies are
keyed by <code class="docutils literal notranslate"><span class="pre">build_hash</span></code>. Each spec still has a <code class="docutils literal notranslate"><span class="pre">hash</span></code> attribute.</p>
<p>Version 3 adds the <code class="docutils literal notranslate"><span class="pre">specfile_version</span></code> field to <code class="docutils literal notranslate"><span class="pre">_meta</span></code> and uses the new JSON spec
format.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;_meta&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;file-type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;spack-lockfile&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;lockfile-version&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;specfile-version&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;roots&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;hash&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;build_hash 1&gt;&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;spec&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;abstract spec 1&gt;&quot;</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;hash&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;build_hash 2&gt;&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;spec&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;abstract spec 2&gt;&quot;</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">    </span><span class="p">],</span>
<span class="w">    </span><span class="nt">&quot;concrete_specs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;&lt;build_hash 1&gt;&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;... &lt;spec dict attributes&gt; ...&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">},</span>
<span class="w">            </span><span class="nt">&quot;dependencies&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;depname_1&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;build_hash&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;build_hash for depname_1&gt;&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;build&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;link&quot;</span><span class="p">]</span>
<span class="w">                </span><span class="p">},</span>
<span class="w">                </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;depname_2&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;build_hash&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;build_hash for depname_2&gt;&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;build&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;link&quot;</span><span class="p">]</span>
<span class="w">                </span><span class="p">},</span>
<span class="w">            </span><span class="p">],</span>
<span class="w">            </span><span class="nt">&quot;hash&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;old_dag_hash 1&gt;&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nt">&quot;&lt;build_hash 2&gt;&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;... &lt;spec dict attributes&gt; ...&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">},</span>
<span class="w">            </span><span class="nt">&quot;dependencies&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;depname_3&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;build_hash&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;build_hash for depname_3&gt;&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;build&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;link&quot;</span><span class="p">]</span>
<span class="w">                </span><span class="p">},</span>
<span class="w">                </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;depname_4&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;build_hash&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;build_hash for depname_4&gt;&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;build&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;link&quot;</span><span class="p">]</span>
<span class="w">                </span><span class="p">},</span>
<span class="w">            </span><span class="p">],</span>
<span class="w">            </span><span class="nt">&quot;hash&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;old_dag_hash 2&gt;&quot;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="version-4">
<h3>Version 4<a class="headerlink" href="#version-4" title="Link to this heading"></a></h3>
<p>Version 4 removes build hashes and is keyed by the new DAG hash (<code class="docutils literal notranslate"><span class="pre">hash</span></code>). The <code class="docutils literal notranslate"><span class="pre">hash</span></code>
now includes build dependencies and a canonical hash of the <code class="docutils literal notranslate"><span class="pre">package.py</span></code> file.
Dependencies are keyed by <code class="docutils literal notranslate"><span class="pre">hash</span></code> (DAG hash) as well. There are no more <code class="docutils literal notranslate"><span class="pre">build_hash</span></code>
fields in the specs, and there are no more issues with lockfiles being able to store
multiple specs with the same DAG hash (because the DAG hash is now finer-grained).
An optional <code class="docutils literal notranslate"><span class="pre">spack</span></code> property may be included to track version information, such as
the commit or version.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;_meta&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;file-type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;spack-lockfile&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;lockfile-version&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;specfile-version&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;roots&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;hash&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;dag_hash 1&gt;&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;spec&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;abstract spec 1&gt;&quot;</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;hash&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;dag_hash 2&gt;&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;spec&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;abstract spec 2&gt;&quot;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">],</span>
<span class="w">    </span><span class="nt">&quot;concrete_specs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;&lt;dag_hash 1&gt;&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;... &lt;spec dict attributes&gt; ...&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">},</span>
<span class="w">            </span><span class="nt">&quot;dependencies&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;depname_1&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;hash&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;dag_hash for depname_1&gt;&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;build&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;link&quot;</span><span class="p">]</span>
<span class="w">                </span><span class="p">},</span>
<span class="w">                </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;depname_2&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;hash&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;dag_hash for depname_2&gt;&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;build&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;link&quot;</span><span class="p">]</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">],</span>
<span class="w">            </span><span class="nt">&quot;hash&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;dag_hash 1&gt;&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nt">&quot;&lt;daghash 2&gt;&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;... &lt;spec dict attributes&gt; ...&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">},</span>
<span class="w">            </span><span class="nt">&quot;dependencies&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;depname_3&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;hash&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;dag_hash for depname_3&gt;&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;build&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;link&quot;</span><span class="p">]</span>
<span class="w">                </span><span class="p">},</span>
<span class="w">                </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;depname_4&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;hash&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;dag_hash for depname_4&gt;&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;build&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;link&quot;</span><span class="p">]</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">],</span>
<span class="w">            </span><span class="nt">&quot;hash&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;dag_hash 2&gt;&quot;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="version-5">
<h3>Version 5<a class="headerlink" href="#version-5" title="Link to this heading"></a></h3>
<p>Version 5 doesn’t change the top-level lockfile format, but an optional dictionary is
added. The dictionary has the <code class="docutils literal notranslate"><span class="pre">root</span></code> and <code class="docutils literal notranslate"><span class="pre">concrete_specs</span></code> of the included
environments, which are keyed by the path to that environment. Since this is optional
if the environment does not have any included environments <code class="docutils literal notranslate"><span class="pre">include_concrete</span></code> will
not be a part of the lockfile.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;_meta&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;file-type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;spack-lockfile&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;lockfile-version&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;specfile-version&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;roots&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;hash&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;dag_hash 1&gt;&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;spec&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;abstract spec 1&gt;&quot;</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;hash&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;dag_hash 2&gt;&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;spec&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;abstract spec 2&gt;&quot;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">],</span>
<span class="w">    </span><span class="nt">&quot;concrete_specs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;&lt;dag_hash 1&gt;&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;... &lt;spec dict attributes&gt; ...&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">},</span>
<span class="w">            </span><span class="nt">&quot;dependencies&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;depname_1&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;hash&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;dag_hash for depname_1&gt;&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;build&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;link&quot;</span><span class="p">]</span>
<span class="w">                </span><span class="p">},</span>
<span class="w">                </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;depname_2&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;hash&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;dag_hash for depname_2&gt;&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;build&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;link&quot;</span><span class="p">]</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">],</span>
<span class="w">            </span><span class="nt">&quot;hash&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;dag_hash 1&gt;&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nt">&quot;&lt;daghash 2&gt;&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;... &lt;spec dict attributes&gt; ...&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">},</span>
<span class="w">            </span><span class="nt">&quot;dependencies&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;depname_3&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;hash&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;dag_hash for depname_3&gt;&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;build&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;link&quot;</span><span class="p">]</span>
<span class="w">                </span><span class="p">},</span>
<span class="w">                </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;depname_4&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;hash&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;dag_hash for depname_4&gt;&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;build&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;link&quot;</span><span class="p">]</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">],</span>
<span class="w">            </span><span class="nt">&quot;hash&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;dag_hash 2&gt;&quot;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="nt">&quot;include_concrete&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;&lt;path to environment&gt;&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;roots&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;hash&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;dag_hash 1&gt;&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;spec&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;abstract spec 1&gt;&quot;</span>
<span class="w">                </span><span class="p">},</span>
<span class="w">                </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;hash&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;dag_hash 2&gt;&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;spec&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;abstract spec 2&gt;&quot;</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">],</span>
<span class="w">            </span><span class="nt">&quot;concrete_specs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;&lt;dag_hash 1&gt;&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;... &lt;spec dict attributes&gt; ...&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">},</span>
<span class="w">                    </span><span class="nt">&quot;dependencies&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                        </span><span class="p">{</span>
<span class="w">                            </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;depname_1&quot;</span><span class="p">,</span>
<span class="w">                            </span><span class="nt">&quot;hash&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;dag_hash for depname_1&gt;&quot;</span><span class="p">,</span>
<span class="w">                            </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;build&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;link&quot;</span><span class="p">]</span>
<span class="w">                        </span><span class="p">},</span>
<span class="w">                        </span><span class="p">{</span>
<span class="w">                            </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;depname_2&quot;</span><span class="p">,</span>
<span class="w">                            </span><span class="nt">&quot;hash&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;dag_hash for depname_2&gt;&quot;</span><span class="p">,</span>
<span class="w">                            </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;build&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;link&quot;</span><span class="p">]</span>
<span class="w">                        </span><span class="p">}</span>
<span class="w">                    </span><span class="p">],</span>
<span class="w">                    </span><span class="nt">&quot;hash&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;dag_hash 1&gt;&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="p">},</span>
<span class="w">                </span><span class="nt">&quot;&lt;daghash 2&gt;&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;... &lt;spec dict attributes&gt; ...&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">},</span>
<span class="w">                    </span><span class="nt">&quot;dependencies&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                        </span><span class="p">{</span>
<span class="w">                            </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;depname_3&quot;</span><span class="p">,</span>
<span class="w">                            </span><span class="nt">&quot;hash&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;dag_hash for depname_3&gt;&quot;</span><span class="p">,</span>
<span class="w">                            </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;build&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;link&quot;</span><span class="p">]</span>
<span class="w">                        </span><span class="p">},</span>
<span class="w">                        </span><span class="p">{</span>
<span class="w">                            </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;depname_4&quot;</span><span class="p">,</span>
<span class="w">                            </span><span class="nt">&quot;hash&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;dag_hash for depname_4&gt;&quot;</span><span class="p">,</span>
<span class="w">                            </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;build&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;link&quot;</span><span class="p">]</span>
<span class="w">                        </span><span class="p">}</span>
<span class="w">                    </span><span class="p">],</span>
<span class="w">                    </span><span class="nt">&quot;hash&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;dag_hash 2&gt;&quot;</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
</section>
<dl class="py class">
<dt class="sig sig-object py" id="spack.environment.Environment">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">spack.environment.</span></span><span class="sig-name descname"><span class="pre">Environment</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">manifest_dir</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spack/environment/environment.html#Environment"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.Environment" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>A Spack environment, which bundles together configuration and a list of specs.</p>
<dl class="py property">
<dt class="sig sig-object py" id="spack.environment.Environment.active">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">active</span></span><a class="headerlink" href="#spack.environment.Environment.active" title="Link to this definition"></a></dt>
<dd><p>True if this environment is currently active.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spack.environment.Environment.add">
<span class="sig-name descname"><span class="pre">add</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">user_spec</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">list_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'specs'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spack/environment/environment.html#Environment.add"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.Environment.add" title="Link to this definition"></a></dt>
<dd><p>Add a single user_spec (non-concretized) to the Environment</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><dl class="simple">
<dt>True if the spec was added, False if it was already</dt><dd><p>present and did not need to be added</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>(<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)">bool</a>)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spack.environment.Environment.add_view_to_env">
<span class="sig-name descname"><span class="pre">add_view_to_env</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">env_mod</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="spack.util.html#spack.util.environment.EnvironmentModifications" title="spack.util.environment.EnvironmentModifications"><span class="pre">EnvironmentModifications</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">view</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="spack.util.html#spack.util.environment.EnvironmentModifications" title="spack.util.environment.EnvironmentModifications"><span class="pre">EnvironmentModifications</span></a></span></span><a class="reference internal" href="_modules/spack/environment/environment.html#Environment.add_view_to_env"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.Environment.add_view_to_env" title="Link to this definition"></a></dt>
<dd><p>Collect the environment modifications to activate an environment using the provided
view. Removes duplicate paths.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>env_mod</strong> – the environment modifications object that is modified.</p></li>
<li><p><strong>view</strong> – the name of the view to activate.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spack.environment.Environment.added_specs">
<span class="sig-name descname"><span class="pre">added_specs</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/spack/environment/environment.html#Environment.added_specs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.Environment.added_specs" title="Link to this definition"></a></dt>
<dd><p>Specs that are not yet installed.</p>
<p>Yields the user spec for non-concretized specs, and the concrete
spec for already concretized but not yet installed specs.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spack.environment.Environment.all_concretized_orders">
<span class="sig-name descname"><span class="pre">all_concretized_orders</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.13)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/spack/environment/environment.html#Environment.all_concretized_orders"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.Environment.all_concretized_orders" title="Link to this definition"></a></dt>
<dd><p>Returns all of the concretized order of the environment and
its included environment(s).</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spack.environment.Environment.all_concretized_user_specs">
<span class="sig-name descname"><span class="pre">all_concretized_user_specs</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.13)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="spack.html#spack.spec.Spec" title="spack.spec.Spec"><span class="pre">Spec</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/spack/environment/environment.html#Environment.all_concretized_user_specs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.Environment.all_concretized_user_specs" title="Link to this definition"></a></dt>
<dd><p>Returns all of the concretized user specs of the environment and
its included environment(s).</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spack.environment.Environment.all_hashes">
<span class="sig-name descname"><span class="pre">all_hashes</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/spack/environment/environment.html#Environment.all_hashes"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.Environment.all_hashes" title="Link to this definition"></a></dt>
<dd><p>Return hashes of all specs.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spack.environment.Environment.all_matching_specs">
<span class="sig-name descname"><span class="pre">all_matching_specs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">specs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="spack.html#spack.spec.Spec" title="spack.spec.Spec"><span class="pre">Spec</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.13)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="spack.html#spack.spec.Spec" title="spack.spec.Spec"><span class="pre">Spec</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/spack/environment/environment.html#Environment.all_matching_specs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.Environment.all_matching_specs" title="Link to this definition"></a></dt>
<dd><p>Returns all concretized specs in the environment satisfying any of the input specs</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spack.environment.Environment.all_specs">
<span class="sig-name descname"><span class="pre">all_specs</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.13)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="spack.html#spack.spec.Spec" title="spack.spec.Spec"><span class="pre">Spec</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/spack/environment/environment.html#Environment.all_specs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.Environment.all_specs" title="Link to this definition"></a></dt>
<dd><p>Returns a list of all concrete specs</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spack.environment.Environment.all_specs_generator">
<span class="sig-name descname"><span class="pre">all_specs_generator</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterable" title="(in Python v3.13)"><span class="pre">Iterable</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="spack.html#spack.spec.Spec" title="spack.spec.Spec"><span class="pre">Spec</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/spack/environment/environment.html#Environment.all_specs_generator"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.Environment.all_specs_generator" title="Link to this definition"></a></dt>
<dd><p>Returns a generator for all concrete specs</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spack.environment.Environment.change_existing_spec">
<span class="sig-name descname"><span class="pre">change_existing_spec</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">change_spec</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="spack.html#spack.spec.Spec" title="spack.spec.Spec"><span class="pre">Spec</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">list_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'specs'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">match_spec</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="spack.html#spack.spec.Spec" title="spack.spec.Spec"><span class="pre">Spec</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allow_changing_multiple_specs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spack/environment/environment.html#Environment.change_existing_spec"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.Environment.change_existing_spec" title="Link to this definition"></a></dt>
<dd><p>Find the spec identified by <cite>match_spec</cite> and change it to <cite>change_spec</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>change_spec</strong> – defines the spec properties that
need to be changed. This will not change attributes of the
matched spec unless they conflict with <cite>change_spec</cite>.</p></li>
<li><p><strong>list_name</strong> – identifies the spec list in the environment that
should be modified</p></li>
<li><p><strong>match_spec</strong> – if set, this identifies the spec
that should be changed. If not set, it is assumed we are
looking for a spec with the same name as <cite>change_spec</cite>.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spack.environment.Environment.check_views">
<span class="sig-name descname"><span class="pre">check_views</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/spack/environment/environment.html#Environment.check_views"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.Environment.check_views" title="Link to this definition"></a></dt>
<dd><p>Checks if the environments default view can be activated.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spack.environment.Environment.clear">
<span class="sig-name descname"><span class="pre">clear</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">re_read</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spack/environment/environment.html#Environment.clear"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.Environment.clear" title="Link to this definition"></a></dt>
<dd><p>Clear the contents of the environment</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>re_read</strong> – If <code class="docutils literal notranslate"><span class="pre">True</span></code>, do not clear <code class="docutils literal notranslate"><span class="pre">new_specs</span></code>. This value cannot be read from yaml,
and needs to be maintained when re-reading an existing environment.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spack.environment.Environment.concrete_roots">
<span class="sig-name descname"><span class="pre">concrete_roots</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/spack/environment/environment.html#Environment.concrete_roots"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.Environment.concrete_roots" title="Link to this definition"></a></dt>
<dd><p>Same as concretized_specs, except it returns the list of concrete
roots <em>without</em> associated user spec</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spack.environment.Environment.concretize">
<span class="sig-name descname"><span class="pre">concretize</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">force</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tests</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spack/environment/environment.html#Environment.concretize"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.Environment.concretize" title="Link to this definition"></a></dt>
<dd><p>Concretize user_specs in this environment.</p>
<p>Only concretizes specs that haven’t been concretized yet unless
force is <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p>
<p>This only modifies the environment in memory. <code class="docutils literal notranslate"><span class="pre">write()</span></code> will
write out a lockfile containing concretized specs.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>force</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>) – re-concretize ALL specs, even those that were
already concretized</p></li>
<li><p><strong>tests</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.13)"><em>list</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#set" title="(in Python v3.13)"><em>set</em></a>) – False to run no tests, True to test
all packages, or a list of package names to run tests for some</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>List of specs that have been concretized. Each entry is a tuple of
the user spec and the corresponding concretized spec.</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="spack.environment.Environment.concretized_order">
<span class="sig-name descname"><span class="pre">concretized_order</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.13)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#spack.environment.Environment.concretized_order" title="Link to this definition"></a></dt>
<dd><p>Roots associated with the last concretization, in order</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spack.environment.Environment.concretized_specs">
<span class="sig-name descname"><span class="pre">concretized_specs</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/spack/environment/environment.html#Environment.concretized_specs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.Environment.concretized_specs" title="Link to this definition"></a></dt>
<dd><p>Tuples of (user spec, concrete spec) for all concrete specs.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="spack.environment.Environment.concretized_user_specs">
<span class="sig-name descname"><span class="pre">concretized_user_specs</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.13)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="spack.html#spack.spec.Spec" title="spack.spec.Spec"><span class="pre">Spec</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#spack.environment.Environment.concretized_user_specs" title="Link to this definition"></a></dt>
<dd><p>User specs from the last concretization</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spack.environment.Environment.deconcretize">
<span class="sig-name descname"><span class="pre">deconcretize</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">spec</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="spack.html#spack.spec.Spec" title="spack.spec.Spec"><span class="pre">Spec</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">concrete</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spack/environment/environment.html#Environment.deconcretize"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.Environment.deconcretize" title="Link to this definition"></a></dt>
<dd><p>Remove specified spec from environment concretization</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>spec</strong> – Spec to deconcretize. This must be a root of the environment</p></li>
<li><p><strong>concrete</strong> – If True, find all instances of spec as concrete in the environemnt.
If False, find a single instance of the abstract spec as root of the environment.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="spack.environment.Environment.default_view">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">default_view</span></span><a class="headerlink" href="#spack.environment.Environment.default_view" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spack.environment.Environment.delete_default_view">
<span class="sig-name descname"><span class="pre">delete_default_view</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span></span><a class="reference internal" href="_modules/spack/environment/environment.html#Environment.delete_default_view"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.Environment.delete_default_view" title="Link to this definition"></a></dt>
<dd><p>Deletes the default view associated with this environment.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spack.environment.Environment.destroy">
<span class="sig-name descname"><span class="pre">destroy</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/spack/environment/environment.html#Environment.destroy"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.Environment.destroy" title="Link to this definition"></a></dt>
<dd><p>Remove this environment from Spack entirely.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="spack.environment.Environment.dev_specs">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">dev_specs</span></span><a class="headerlink" href="#spack.environment.Environment.dev_specs" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spack.environment.Environment.ensure_env_directory_exists">
<span class="sig-name descname"><span class="pre">ensure_env_directory_exists</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dot_env</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span></span><a class="reference internal" href="_modules/spack/environment/environment.html#Environment.ensure_env_directory_exists"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.Environment.ensure_env_directory_exists" title="Link to this definition"></a></dt>
<dd><p>Ensure that the root directory of the environment exists</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>dot_env</strong> – if True also ensures that the &lt;root&gt;/.env directory exists</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spack.environment.Environment.filter_specs">
<span class="sig-name descname"><span class="pre">filter_specs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">reader</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">json_specs_by_hash</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">order_concretized</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spack/environment/environment.html#Environment.filter_specs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.Environment.filter_specs" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spack.environment.Environment.get_by_hash">
<span class="sig-name descname"><span class="pre">get_by_hash</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dag_hash</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.13)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="spack.html#spack.spec.Spec" title="spack.spec.Spec"><span class="pre">Spec</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/spack/environment/environment.html#Environment.get_by_hash"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.Environment.get_by_hash" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spack.environment.Environment.get_one_by_hash">
<span class="sig-name descname"><span class="pre">get_one_by_hash</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dag_hash</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spack/environment/environment.html#Environment.get_one_by_hash"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.Environment.get_one_by_hash" title="Link to this definition"></a></dt>
<dd><p>Returns the single spec from the environment which matches the
provided hash.  Raises an AssertionError if no specs match or if
more than one spec matches.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spack.environment.Environment.has_view">
<span class="sig-name descname"><span class="pre">has_view</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">view_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a></span></span><a class="reference internal" href="_modules/spack/environment/environment.html#Environment.has_view"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.Environment.has_view" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spack.environment.Environment.include_concrete_envs">
<span class="sig-name descname"><span class="pre">include_concrete_envs</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/spack/environment/environment.html#Environment.include_concrete_envs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.Environment.include_concrete_envs" title="Link to this definition"></a></dt>
<dd><p>Copy and save the included envs’ specs internally</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="spack.environment.Environment.included_concrete_envs">
<span class="sig-name descname"><span class="pre">included_concrete_envs</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.13)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#spack.environment.Environment.included_concrete_envs" title="Link to this definition"></a></dt>
<dd><p>Environment paths for concrete (lockfile) included environments</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="spack.environment.Environment.included_concrete_spec_data">
<span class="sig-name descname"><span class="pre">included_concrete_spec_data</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.13)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.13)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.13)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#spack.environment.Environment.included_concrete_spec_data" title="Link to this definition"></a></dt>
<dd><p>First-level included concretized spec data from/to the lockfile.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="spack.environment.Environment.included_concretized_order">
<span class="sig-name descname"><span class="pre">included_concretized_order</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.13)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.13)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#spack.environment.Environment.included_concretized_order" title="Link to this definition"></a></dt>
<dd><p>Roots from included environments with the last concretization, in order</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="spack.environment.Environment.included_concretized_user_specs">
<span class="sig-name descname"><span class="pre">included_concretized_user_specs</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.13)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.13)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="spack.html#spack.spec.Spec" title="spack.spec.Spec"><span class="pre">Spec</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#spack.environment.Environment.included_concretized_user_specs" title="Link to this definition"></a></dt>
<dd><p>User specs from included environments from the last concretization</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="spack.environment.Environment.included_specs_by_hash">
<span class="sig-name descname"><span class="pre">included_specs_by_hash</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.13)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.13)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference internal" href="spack.html#spack.spec.Spec" title="spack.spec.Spec"><span class="pre">Spec</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#spack.environment.Environment.included_specs_by_hash" title="Link to this definition"></a></dt>
<dd><p>Concretized specs by hash from the included environments</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="spack.environment.Environment.included_user_specs">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">included_user_specs</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="spack.html#spack.spec_list.SpecList" title="spack.spec_list.SpecList"><span class="pre">SpecList</span></a></em><a class="headerlink" href="#spack.environment.Environment.included_user_specs" title="Link to this definition"></a></dt>
<dd><p>Included concrete user (or root) specs from last concretization.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spack.environment.Environment.install_all">
<span class="sig-name descname"><span class="pre">install_all</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">install_args</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spack/environment/environment.html#Environment.install_all"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.Environment.install_all" title="Link to this definition"></a></dt>
<dd><p>Install all concretized specs in an environment.</p>
<p>Note: this does not regenerate the views for the environment;
that needs to be done separately with a call to write().</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>install_args</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.13)"><em>dict</em></a>) – keyword install arguments</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spack.environment.Environment.install_specs">
<span class="sig-name descname"><span class="pre">install_specs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">specs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.13)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="spack.html#spack.spec.Spec" title="spack.spec.Spec"><span class="pre">Spec</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">install_args</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spack/environment/environment.html#Environment.install_specs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.Environment.install_specs" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spack.environment.Environment.invalidate_repository_cache">
<span class="sig-name descname"><span class="pre">invalidate_repository_cache</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/spack/environment/environment.html#Environment.invalidate_repository_cache"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.Environment.invalidate_repository_cache" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spack.environment.Environment.is_develop">
<span class="sig-name descname"><span class="pre">is_develop</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">spec</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spack/environment/environment.html#Environment.is_develop"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.Environment.is_develop" title="Link to this definition"></a></dt>
<dd><p>Returns true when the spec is built from local sources</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="spack.environment.Environment.lock_path">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">lock_path</span></span><a class="headerlink" href="#spack.environment.Environment.lock_path" title="Link to this definition"></a></dt>
<dd><p>Path to spack.lock file in this environment.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="spack.environment.Environment.manifest_path">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">manifest_path</span></span><a class="headerlink" href="#spack.environment.Environment.manifest_path" title="Link to this definition"></a></dt>
<dd><p>Path to spack.yaml file in this environment.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spack.environment.Environment.manifest_uptodate_or_warn">
<span class="sig-name descname"><span class="pre">manifest_uptodate_or_warn</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/spack/environment/environment.html#Environment.manifest_uptodate_or_warn"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.Environment.manifest_uptodate_or_warn" title="Link to this definition"></a></dt>
<dd><p>Emits a warning if the manifest file is not up-to-date.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spack.environment.Environment.matching_spec">
<span class="sig-name descname"><span class="pre">matching_spec</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">spec</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spack/environment/environment.html#Environment.matching_spec"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.Environment.matching_spec" title="Link to this definition"></a></dt>
<dd><p>Given a spec (likely not concretized), find a matching concretized
spec in the environment.</p>
<p>The matching spec does not have to be installed in the environment,
but must be concrete (specs added with <cite>spack add</cite> without an
intervening <cite>spack concretize</cite> will not be matched).</p>
<p>If there is a single root spec that matches the provided spec or a
single dependency spec that matches the provided spec, then the
concretized instance of that spec will be returned.</p>
<p>If multiple root specs match the provided spec, or no root specs match
and multiple dependency specs match, then this raises an error
and reports all matching specs.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spack.environment.Environment.regenerate_views">
<span class="sig-name descname"><span class="pre">regenerate_views</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/spack/environment/environment.html#Environment.regenerate_views"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.Environment.regenerate_views" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spack.environment.Environment.remove">
<span class="sig-name descname"><span class="pre">remove</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">query_spec</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">list_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'specs'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">force</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spack/environment/environment.html#Environment.remove"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.Environment.remove" title="Link to this definition"></a></dt>
<dd><p>Remove specs from an environment that match a query_spec</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spack.environment.Environment.removed_specs">
<span class="sig-name descname"><span class="pre">removed_specs</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/spack/environment/environment.html#Environment.removed_specs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.Environment.removed_specs" title="Link to this definition"></a></dt>
<dd><p>Tuples of (user spec, concrete spec) for all specs that will be
removed on next concretize.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="spack.environment.Environment.repo">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">repo</span></span><a class="headerlink" href="#spack.environment.Environment.repo" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="spack.environment.Environment.repos_path">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">repos_path</span></span><a class="headerlink" href="#spack.environment.Environment.repos_path" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spack.environment.Environment.rm_view_from_env">
<span class="sig-name descname"><span class="pre">rm_view_from_env</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">env_mod</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="spack.util.html#spack.util.environment.EnvironmentModifications" title="spack.util.environment.EnvironmentModifications"><span class="pre">EnvironmentModifications</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">view</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="spack.util.html#spack.util.environment.EnvironmentModifications" title="spack.util.environment.EnvironmentModifications"><span class="pre">EnvironmentModifications</span></a></span></span><a class="reference internal" href="_modules/spack/environment/environment.html#Environment.rm_view_from_env"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.Environment.rm_view_from_env" title="Link to this definition"></a></dt>
<dd><p>Collect the environment modifications to deactivate an environment using the provided
view. Reverses the action of <code class="docutils literal notranslate"><span class="pre">add_view_to_env</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>env_mod</strong> – the environment modifications object that is modified.</p></li>
<li><p><strong>view</strong> – the name of the view to deactivate.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spack.environment.Environment.roots">
<span class="sig-name descname"><span class="pre">roots</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/spack/environment/environment.html#Environment.roots"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.Environment.roots" title="Link to this definition"></a></dt>
<dd><p>Specs explicitly requested by the user <em>in this environment</em>.</p>
<p>Yields both added and installed specs that have user specs in
<cite>spack.yaml</cite>.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="spack.environment.Environment.scope_name">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">scope_name</span></span><a class="headerlink" href="#spack.environment.Environment.scope_name" title="Link to this definition"></a></dt>
<dd><p>Name of the config scope of this environment’s manifest file.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spack.environment.Environment.set_included_concretized_user_specs">
<span class="sig-name descname"><span class="pre">set_included_concretized_user_specs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">env_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">env_info</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.13)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.13)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.13)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">included_json_specs_by_hash</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.13)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.13)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.13)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.13)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.13)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.13)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/spack/environment/environment.html#Environment.set_included_concretized_user_specs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.Environment.set_included_concretized_user_specs" title="Link to this definition"></a></dt>
<dd><p>Sets all of the concretized user specs from included environments
to include those from nested included environments.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>env_name</strong> – the name (technically the path) of the included environment</p></li>
<li><p><strong>env_info</strong> – included concrete environment data</p></li>
<li><p><strong>included_json_specs_by_hash</strong> – concrete spec data keyed by hash</p></li>
</ul>
</dd>
</dl>
<p>Returns: updated specs_by_hash</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="spack.environment.Environment.spec_lists">
<span class="sig-name descname"><span class="pre">spec_lists</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.13)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference internal" href="spack.html#spack.spec_list.SpecList" title="spack.spec_list.SpecList"><span class="pre">SpecList</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#spack.environment.Environment.spec_lists" title="Link to this definition"></a></dt>
<dd><p>Specs from “spack.yaml”</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="spack.environment.Environment.specs_by_hash">
<span class="sig-name descname"><span class="pre">specs_by_hash</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.13)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference internal" href="spack.html#spack.spec.Spec" title="spack.spec.Spec"><span class="pre">Spec</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#spack.environment.Environment.specs_by_hash" title="Link to this definition"></a></dt>
<dd><p>Concretized specs by hash</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="spack.environment.Environment.unify">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">unify</span></span><a class="headerlink" href="#spack.environment.Environment.unify" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spack.environment.Environment.uninstalled_specs">
<span class="sig-name descname"><span class="pre">uninstalled_specs</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/spack/environment/environment.html#Environment.uninstalled_specs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.Environment.uninstalled_specs" title="Link to this definition"></a></dt>
<dd><p>Return root specs that are not installed, or are installed, but
are development specs themselves or have those among their dependencies.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spack.environment.Environment.update_default_view">
<span class="sig-name descname"><span class="pre">update_default_view</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path_or_bool</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span></span><a class="reference internal" href="_modules/spack/environment/environment.html#Environment.update_default_view"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.Environment.update_default_view" title="Link to this definition"></a></dt>
<dd><p>Updates the path of the default view.</p>
<p>If the argument passed as input is False the default view is deleted, if present. The
manifest will have an entry “view: false”.</p>
<p>If the argument passed as input is True a default view is created, if not already present.
The manifest will have an entry “view: true”. If a default view is already declared, it
will be left untouched.</p>
<p>If the argument passed as input is a path a default view pointing to that path is created,
if not present already. If a default view is already declared, only its “root” will be
changed.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>path_or_bool</strong> – either True, or False or a path</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spack.environment.Environment.update_environment_repository">
<span class="sig-name descname"><span class="pre">update_environment_repository</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span></span><a class="reference internal" href="_modules/spack/environment/environment.html#Environment.update_environment_repository"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.Environment.update_environment_repository" title="Link to this definition"></a></dt>
<dd><p>Updates the repository associated with the environment.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spack.environment.Environment.update_lockfile">
<span class="sig-name descname"><span class="pre">update_lockfile</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span></span><a class="reference internal" href="_modules/spack/environment/environment.html#Environment.update_lockfile"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.Environment.update_lockfile" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spack.environment.Environment.update_stale_references">
<span class="sig-name descname"><span class="pre">update_stale_references</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">from_list</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spack/environment/environment.html#Environment.update_stale_references"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.Environment.update_stale_references" title="Link to this definition"></a></dt>
<dd><p>Iterate over spec lists updating references.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="spack.environment.Environment.user_specs">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">user_specs</span></span><a class="headerlink" href="#spack.environment.Environment.user_specs" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="spack.environment.Environment.view_path_default">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">view_path_default</span></span><a class="headerlink" href="#spack.environment.Environment.view_path_default" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spack.environment.Environment.write">
<span class="sig-name descname"><span class="pre">write</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">regenerate</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span></span><a class="reference internal" href="_modules/spack/environment/environment.html#Environment.write"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.Environment.write" title="Link to this definition"></a></dt>
<dd><p>Writes an in-memory environment to its location on disk.</p>
<p>Write out package files for each newly concretized spec.  Also
regenerate any views associated with the environment and run post-write
hooks, if regenerate is True.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>regenerate</strong> – regenerate views and run post-write hooks as well as writing if True.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spack.environment.Environment.write_transaction">
<span class="sig-name descname"><span class="pre">write_transaction</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/spack/environment/environment.html#Environment.write_transaction"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.Environment.write_transaction" title="Link to this definition"></a></dt>
<dd><p>Get a write lock context manager for use in a <cite>with</cite> block.</p>
</dd></dl>

</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="spack.environment.SpackEnvironmentConfigError">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">spack.environment.</span></span><span class="sig-name descname"><span class="pre">SpackEnvironmentConfigError</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">message</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">long_message</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spack/environment/environment.html#SpackEnvironmentConfigError"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.SpackEnvironmentConfigError" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#spack.environment.environment.SpackEnvironmentError" title="spack.environment.environment.SpackEnvironmentError"><code class="xref py py-class docutils literal notranslate"><span class="pre">SpackEnvironmentError</span></code></a></p>
<p>Class for Spack environment-specific configuration errors.</p>
</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="spack.environment.SpackEnvironmentError">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">spack.environment.</span></span><span class="sig-name descname"><span class="pre">SpackEnvironmentError</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">message</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">long_message</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spack/environment/environment.html#SpackEnvironmentError"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.SpackEnvironmentError" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="spack.html#spack.error.SpackError" title="spack.error.SpackError"><code class="xref py py-class docutils literal notranslate"><span class="pre">SpackError</span></code></a></p>
<p>Superclass for all errors to do with Spack environments.</p>
</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="spack.environment.SpackEnvironmentViewError">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">spack.environment.</span></span><span class="sig-name descname"><span class="pre">SpackEnvironmentViewError</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">message</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">long_message</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spack/environment/environment.html#SpackEnvironmentViewError"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.SpackEnvironmentViewError" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#spack.environment.environment.SpackEnvironmentError" title="spack.environment.environment.SpackEnvironmentError"><code class="xref py py-class docutils literal notranslate"><span class="pre">SpackEnvironmentError</span></code></a></p>
<p>Class for errors regarding view generation.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spack.environment.activate">
<span class="sig-prename descclassname"><span class="pre">spack.environment.</span></span><span class="sig-name descname"><span class="pre">activate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">env</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_env_repo</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spack/environment/environment.html#activate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.activate" title="Link to this definition"></a></dt>
<dd><p>Activate an environment.</p>
<p>To activate an environment, we add its manifest’s configuration scope to the
existing Spack configuration, and we set active to the current environment.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>env</strong> (<a class="reference internal" href="#spack.environment.Environment" title="spack.environment.Environment"><em>Environment</em></a>) – the environment to activate</p></li>
<li><p><strong>use_env_repo</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>) – use the packages exactly as they appear in the
environment’s repository</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spack.environment.active">
<span class="sig-prename descclassname"><span class="pre">spack.environment.</span></span><span class="sig-name descname"><span class="pre">active</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spack/environment/environment.html#active"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.active" title="Link to this definition"></a></dt>
<dd><p>True if the named environment is active.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spack.environment.active_environment">
<span class="sig-prename descclassname"><span class="pre">spack.environment.</span></span><span class="sig-name descname"><span class="pre">active_environment</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#spack.environment.environment.Environment" title="spack.environment.environment.Environment"><span class="pre">Environment</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span></span><a class="reference internal" href="_modules/spack/environment/environment.html#active_environment"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.active_environment" title="Link to this definition"></a></dt>
<dd><p>Returns the active environment when there is any</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spack.environment.all_environment_names">
<span class="sig-prename descclassname"><span class="pre">spack.environment.</span></span><span class="sig-name descname"><span class="pre">all_environment_names</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/spack/environment/environment.html#all_environment_names"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.all_environment_names" title="Link to this definition"></a></dt>
<dd><p>List the names of environments that currently exist.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spack.environment.all_environments">
<span class="sig-prename descclassname"><span class="pre">spack.environment.</span></span><span class="sig-name descname"><span class="pre">all_environments</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/spack/environment/environment.html#all_environments"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.all_environments" title="Link to this definition"></a></dt>
<dd><p>Generator for all managed Environments.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spack.environment.as_env_dir">
<span class="sig-prename descclassname"><span class="pre">spack.environment.</span></span><span class="sig-name descname"><span class="pre">as_env_dir</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name_or_dir</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spack/environment/environment.html#as_env_dir"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.as_env_dir" title="Link to this definition"></a></dt>
<dd><p>Translate an environment name or directory to the environment directory</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spack.environment.create">
<span class="sig-prename descclassname"><span class="pre">spack.environment.</span></span><span class="sig-name descname"><span class="pre">create</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">init_file</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Path</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">with_view</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Path</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keep_relative</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">include_concrete</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.13)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#spack.environment.environment.Environment" title="spack.environment.environment.Environment"><span class="pre">Environment</span></a></span></span><a class="reference internal" href="_modules/spack/environment/environment.html#create"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.create" title="Link to this definition"></a></dt>
<dd><p>Create a managed environment in Spack and returns it.</p>
<p>A managed environment is created in a root directory managed by this Spack instance, so that
Spack can keep track of them.</p>
<p>Files with suffix <code class="docutils literal notranslate"><span class="pre">.json</span></code> or <code class="docutils literal notranslate"><span class="pre">.lock</span></code> are considered lockfiles. Files with any other name
are considered manifest files.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> – name of the managed environment</p></li>
<li><p><strong>init_file</strong> – either a lockfile, a manifest file, or None</p></li>
<li><p><strong>with_view</strong> – whether a view should be maintained for the environment. If the value is a
string, it specifies the path to the view</p></li>
<li><p><strong>keep_relative</strong> – if True, develop paths are copied verbatim into the new environment file,
otherwise they are made absolute</p></li>
<li><p><strong>include_concrete</strong> – list of concrete environment names/paths to be included</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spack.environment.create_in_dir">
<span class="sig-prename descclassname"><span class="pre">spack.environment.</span></span><span class="sig-name descname"><span class="pre">create_in_dir</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">root</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">init_file</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Path</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">with_view</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Path</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keep_relative</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">include_concrete</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.13)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#spack.environment.environment.Environment" title="spack.environment.environment.Environment"><span class="pre">Environment</span></a></span></span><a class="reference internal" href="_modules/spack/environment/environment.html#create_in_dir"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.create_in_dir" title="Link to this definition"></a></dt>
<dd><p>Create an environment in the directory passed as input and returns it.</p>
<p>Files with suffix <code class="docutils literal notranslate"><span class="pre">.json</span></code> or <code class="docutils literal notranslate"><span class="pre">.lock</span></code> are considered lockfiles. Files with any other name
are considered manifest files.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>root</strong> – directory where to create the environment.</p></li>
<li><p><strong>init_file</strong> – either a lockfile, a manifest file, or None</p></li>
<li><p><strong>with_view</strong> – whether a view should be maintained for the environment. If the value is a
string, it specifies the path to the view</p></li>
<li><p><strong>keep_relative</strong> – if True, develop paths are copied verbatim into the new environment file,
otherwise they are made absolute</p></li>
<li><p><strong>include_concrete</strong> – concrete environment names/paths to be included</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spack.environment.deactivate">
<span class="sig-prename descclassname"><span class="pre">spack.environment.</span></span><span class="sig-name descname"><span class="pre">deactivate</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/spack/environment/environment.html#deactivate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.deactivate" title="Link to this definition"></a></dt>
<dd><p>Undo any configuration or repo settings modified by <code class="docutils literal notranslate"><span class="pre">activate()</span></code>.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spack.environment.default_manifest_yaml">
<span class="sig-prename descclassname"><span class="pre">spack.environment.</span></span><span class="sig-name descname"><span class="pre">default_manifest_yaml</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/spack/environment/environment.html#default_manifest_yaml"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.default_manifest_yaml" title="Link to this definition"></a></dt>
<dd><p>default spack.yaml file to put in new environments</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spack.environment.display_specs">
<span class="sig-prename descclassname"><span class="pre">spack.environment.</span></span><span class="sig-name descname"><span class="pre">display_specs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">specs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spack/environment/environment.html#display_specs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.display_specs" title="Link to this definition"></a></dt>
<dd><p>Displays a list of specs traversed breadth-first, covering nodes, with install status.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>specs</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.13)"><em>list</em></a>) – list of specs</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spack.environment.environment_dir_from_name">
<span class="sig-prename descclassname"><span class="pre">spack.environment.</span></span><span class="sig-name descname"><span class="pre">environment_dir_from_name</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">exists_ok</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></span><a class="reference internal" href="_modules/spack/environment/environment.html#environment_dir_from_name"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.environment_dir_from_name" title="Link to this definition"></a></dt>
<dd><p>Returns the directory associated with a named environment.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> – name of the environment</p></li>
<li><p><strong>exists_ok</strong> – if False, raise an error if the environment exists already</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#spack.environment.SpackEnvironmentError" title="spack.environment.SpackEnvironmentError"><strong>SpackEnvironmentError</strong></a> – if exists_ok is False and the environment exists already</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spack.environment.environment_from_name_or_dir">
<span class="sig-prename descclassname"><span class="pre">spack.environment.</span></span><span class="sig-name descname"><span class="pre">environment_from_name_or_dir</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name_or_dir</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spack/environment/environment.html#environment_from_name_or_dir"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.environment_from_name_or_dir" title="Link to this definition"></a></dt>
<dd><p>Get an environment with the supplied name.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spack.environment.exists">
<span class="sig-prename descclassname"><span class="pre">spack.environment.</span></span><span class="sig-name descname"><span class="pre">exists</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spack/environment/environment.html#exists"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.exists" title="Link to this definition"></a></dt>
<dd><p>Whether an environment with this name exists or not.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spack.environment.initialize_environment_dir">
<span class="sig-prename descclassname"><span class="pre">spack.environment.</span></span><span class="sig-name descname"><span class="pre">initialize_environment_dir</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">environment_dir</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">envfile</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Path</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span></span><a class="reference internal" href="_modules/spack/environment/environment.html#initialize_environment_dir"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.initialize_environment_dir" title="Link to this definition"></a></dt>
<dd><p>Initialize an environment directory starting from an envfile.</p>
<p>Files with suffix .json or .lock are considered lockfiles. Files with any other name
are considered manifest files.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>environment_dir</strong> – directory where the environment should be placed</p></li>
<li><p><strong>envfile</strong> – manifest file or lockfile used to initialize the environment</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#spack.environment.SpackEnvironmentError" title="spack.environment.SpackEnvironmentError"><strong>SpackEnvironmentError</strong></a> – if the directory can’t be initialized</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spack.environment.installed_specs">
<span class="sig-prename descclassname"><span class="pre">spack.environment.</span></span><span class="sig-name descname"><span class="pre">installed_specs</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/spack/environment/environment.html#installed_specs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.installed_specs" title="Link to this definition"></a></dt>
<dd><p>Returns the specs of packages installed in the active environment or None
if no packages are installed.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spack.environment.is_env_dir">
<span class="sig-prename descclassname"><span class="pre">spack.environment.</span></span><span class="sig-name descname"><span class="pre">is_env_dir</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spack/environment/environment.html#is_env_dir"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.is_env_dir" title="Link to this definition"></a></dt>
<dd><p>Whether a directory contains a spack environment.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spack.environment.is_latest_format">
<span class="sig-prename descclassname"><span class="pre">spack.environment.</span></span><span class="sig-name descname"><span class="pre">is_latest_format</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">manifest</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spack/environment/environment.html#is_latest_format"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.is_latest_format" title="Link to this definition"></a></dt>
<dd><p>Return False if the manifest file exists and is not in the latest schema format.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>manifest</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) – manifest file to be analyzed</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spack.environment.manifest_file">
<span class="sig-prename descclassname"><span class="pre">spack.environment.</span></span><span class="sig-name descname"><span class="pre">manifest_file</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">env_name_or_dir</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spack/environment/environment.html#manifest_file"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.manifest_file" title="Link to this definition"></a></dt>
<dd><p>Return the absolute path to a manifest file given the environment
name or directory.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>env_name_or_dir</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) – either the name of a valid environment
or a directory where a manifest file resides</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#AssertionError" title="(in Python v3.13)"><strong>AssertionError</strong></a> – if the environment is not found</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spack.environment.no_active_environment">
<span class="sig-prename descclassname"><span class="pre">spack.environment.</span></span><span class="sig-name descname"><span class="pre">no_active_environment</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/spack/environment/environment.html#no_active_environment"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.no_active_environment" title="Link to this definition"></a></dt>
<dd><p>Deactivate the active environment for the duration of the context. Has no
effect when there is no active environment.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spack.environment.read">
<span class="sig-prename descclassname"><span class="pre">spack.environment.</span></span><span class="sig-name descname"><span class="pre">read</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spack/environment/environment.html#read"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.read" title="Link to this definition"></a></dt>
<dd><p>Get an environment with the supplied name.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spack.environment.root">
<span class="sig-prename descclassname"><span class="pre">spack.environment.</span></span><span class="sig-name descname"><span class="pre">root</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spack/environment/environment.html#root"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.root" title="Link to this definition"></a></dt>
<dd><p>Get the root directory for an environment by name.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spack.environment.update_yaml">
<span class="sig-prename descclassname"><span class="pre">spack.environment.</span></span><span class="sig-name descname"><span class="pre">update_yaml</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">manifest</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">backup_file</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spack/environment/environment.html#update_yaml"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.update_yaml" title="Link to this definition"></a></dt>
<dd><p>Update a manifest file from an old format to the current one.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>manifest</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) – path to a manifest file</p></li>
<li><p><strong>backup_file</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) – file where to copy the original manifest</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>True if the manifest was updated, False otherwise.</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#AssertionError" title="(in Python v3.13)"><strong>AssertionError</strong></a> – in case anything goes wrong during the update</p>
</dd>
</dl>
</dd></dl>

<section id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Link to this heading"></a></h2>
</section>
<section id="module-spack.environment.depfile">
<span id="spack-environment-depfile-module"></span><h2>spack.environment.depfile module<a class="headerlink" href="#module-spack.environment.depfile" title="Link to this heading"></a></h2>
<p>This module contains the traversal logic and models that can be used to generate
depfiles from an environment.</p>
<dl class="py class">
<dt class="sig sig-object py" id="spack.environment.depfile.DepfileNode">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">spack.environment.depfile.</span></span><span class="sig-name descname"><span class="pre">DepfileNode</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">target</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="spack.html#spack.spec.Spec" title="spack.spec.Spec"><span class="pre">Spec</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">prereqs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.13)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="spack.html#spack.spec.Spec" title="spack.spec.Spec"><span class="pre">Spec</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">buildcache</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#spack.environment.depfile.UseBuildCache" title="spack.environment.depfile.UseBuildCache"><span class="pre">UseBuildCache</span></a></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spack/environment/depfile.html#DepfileNode"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.depfile.DepfileNode" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Contains a spec, a subset of its dependencies, and a flag whether it should be
buildcache only/never/auto.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="spack.environment.depfile.DepfileSpecVisitor">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">spack.environment.depfile.</span></span><span class="sig-name descname"><span class="pre">DepfileSpecVisitor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pkg_buildcache</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#spack.environment.depfile.UseBuildCache" title="spack.environment.depfile.UseBuildCache"><span class="pre">UseBuildCache</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">deps_buildcache</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#spack.environment.depfile.UseBuildCache" title="spack.environment.depfile.UseBuildCache"><span class="pre">UseBuildCache</span></a></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spack/environment/depfile.html#DepfileSpecVisitor"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.depfile.DepfileSpecVisitor" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>This visitor produces an adjacency list of a (reduced) DAG, which
is used to generate depfile targets with their prerequisites. Currently
it only drops build deps when using buildcache only mode.</p>
<p>Note that the DAG could be reduced even more by dropping build edges of specs
installed at the moment the depfile is generated, but that would produce
stateful depfiles that would not fail when the database is wiped later.</p>
<dl class="py method">
<dt class="sig sig-object py" id="spack.environment.depfile.DepfileSpecVisitor.accept">
<span class="sig-name descname"><span class="pre">accept</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">node</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spack/environment/depfile.html#DepfileSpecVisitor.accept"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.depfile.DepfileSpecVisitor.accept" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spack.environment.depfile.DepfileSpecVisitor.neighbors">
<span class="sig-name descname"><span class="pre">neighbors</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">node</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spack/environment/depfile.html#DepfileSpecVisitor.neighbors"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.depfile.DepfileSpecVisitor.neighbors" title="Link to this definition"></a></dt>
<dd><p>Produce a list of spec to follow from node</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="spack.environment.depfile.MakefileModel">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">spack.environment.depfile.</span></span><span class="sig-name descname"><span class="pre">MakefileModel</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">env</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#spack.environment.environment.Environment" title="spack.environment.environment.Environment"><span class="pre">Environment</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">roots</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.13)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="spack.html#spack.spec.Spec" title="spack.spec.Spec"><span class="pre">Spec</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">adjacency_list</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.13)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#spack.environment.depfile.DepfileNode" title="spack.environment.depfile.DepfileNode"><span class="pre">DepfileNode</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">make_prefix</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">jobserver</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spack/environment/depfile.html#MakefileModel"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.depfile.MakefileModel" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>This class produces all data to render a makefile for specs of an environment.</p>
<dl class="py property">
<dt class="sig sig-object py" id="spack.environment.depfile.MakefileModel.empty">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">empty</span></span><a class="headerlink" href="#spack.environment.depfile.MakefileModel.empty" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spack.environment.depfile.MakefileModel.from_env">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_env</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">env</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#spack.environment.environment.Environment" title="spack.environment.environment.Environment"><span class="pre">Environment</span></a></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filter_specs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.13)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="spack.html#spack.spec.Spec" title="spack.spec.Spec"><span class="pre">Spec</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pkg_buildcache</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#spack.environment.depfile.UseBuildCache" title="spack.environment.depfile.UseBuildCache"><span class="pre">UseBuildCache</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">UseBuildCache.AUTO</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dep_buildcache</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#spack.environment.depfile.UseBuildCache" title="spack.environment.depfile.UseBuildCache"><span class="pre">UseBuildCache</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">UseBuildCache.AUTO</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">make_prefix</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">jobserver</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#spack.environment.depfile.MakefileModel" title="spack.environment.depfile.MakefileModel"><span class="pre">MakefileModel</span></a></span></span><a class="reference internal" href="_modules/spack/environment/depfile.html#MakefileModel.from_env"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.depfile.MakefileModel.from_env" title="Link to this definition"></a></dt>
<dd><p>Produces a MakefileModel from an environment and a list of specs.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>env</strong> – the environment to use</p></li>
<li><p><strong>filter_specs</strong> – if provided, only these specs will be built from the environment,
otherwise the environment roots are used.</p></li>
<li><p><strong>pkg_buildcache</strong> – whether to only use the buildcache for top-level specs.</p></li>
<li><p><strong>dep_buildcache</strong> – whether to only use the buildcache for non-top-level specs.</p></li>
<li><p><strong>make_prefix</strong> – the prefix for the makefile targets</p></li>
<li><p><strong>jobserver</strong> – when enabled, make will invoke Spack with jobserver support. For
dry-run this should be disabled.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spack.environment.depfile.MakefileModel.to_dict">
<span class="sig-name descname"><span class="pre">to_dict</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/spack/environment/depfile.html#MakefileModel.to_dict"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.depfile.MakefileModel.to_dict" title="Link to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="spack.environment.depfile.MakefileSpec">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">spack.environment.depfile.</span></span><span class="sig-name descname"><span class="pre">MakefileSpec</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">spec</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spack/environment/depfile.html#MakefileSpec"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.depfile.MakefileSpec" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Limited interface to spec to help generate targets etc. without
introducing unwanted special characters.</p>
<dl class="py method">
<dt class="sig sig-object py" id="spack.environment.depfile.MakefileSpec.safe_format">
<span class="sig-name descname"><span class="pre">safe_format</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">format_str</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spack/environment/depfile.html#MakefileSpec.safe_format"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.depfile.MakefileSpec.safe_format" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spack.environment.depfile.MakefileSpec.safe_name">
<span class="sig-name descname"><span class="pre">safe_name</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/spack/environment/depfile.html#MakefileSpec.safe_name"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.depfile.MakefileSpec.safe_name" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spack.environment.depfile.MakefileSpec.spec_hash">
<span class="sig-name descname"><span class="pre">spec_hash</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/spack/environment/depfile.html#MakefileSpec.spec_hash"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.depfile.MakefileSpec.spec_hash" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spack.environment.depfile.MakefileSpec.unsafe_format">
<span class="sig-name descname"><span class="pre">unsafe_format</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">format_str</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spack/environment/depfile.html#MakefileSpec.unsafe_format"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.depfile.MakefileSpec.unsafe_format" title="Link to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="spack.environment.depfile.UseBuildCache">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">spack.environment.depfile.</span></span><span class="sig-name descname"><span class="pre">UseBuildCache</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">names=&lt;not</span> <span class="pre">given&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">*values</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">module=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">qualname=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">type=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start=1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">boundary=None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spack/environment/depfile.html#UseBuildCache"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.depfile.UseBuildCache" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/enum.html#enum.Enum" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Enum</span></code></a></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="spack.environment.depfile.UseBuildCache.AUTO">
<span class="sig-name descname"><span class="pre">AUTO</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">3</span></em><a class="headerlink" href="#spack.environment.depfile.UseBuildCache.AUTO" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="spack.environment.depfile.UseBuildCache.NEVER">
<span class="sig-name descname"><span class="pre">NEVER</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">2</span></em><a class="headerlink" href="#spack.environment.depfile.UseBuildCache.NEVER" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="spack.environment.depfile.UseBuildCache.ONLY">
<span class="sig-name descname"><span class="pre">ONLY</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">1</span></em><a class="headerlink" href="#spack.environment.depfile.UseBuildCache.ONLY" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spack.environment.depfile.UseBuildCache.from_string">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_string</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">s</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#spack.environment.depfile.UseBuildCache" title="spack.environment.depfile.UseBuildCache"><span class="pre">UseBuildCache</span></a></span></span><a class="reference internal" href="_modules/spack/environment/depfile.html#UseBuildCache.from_string"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.depfile.UseBuildCache.from_string" title="Link to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

</section>
<section id="module-spack.environment.environment">
<span id="spack-environment-environment-module"></span><h2>spack.environment.environment module<a class="headerlink" href="#module-spack.environment.environment" title="Link to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="spack.environment.environment.Environment">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">spack.environment.environment.</span></span><span class="sig-name descname"><span class="pre">Environment</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">manifest_dir</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spack/environment/environment.html#Environment"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.environment.Environment" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>A Spack environment, which bundles together configuration and a list of specs.</p>
<dl class="py property">
<dt class="sig sig-object py" id="spack.environment.environment.Environment.active">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">active</span></span><a class="headerlink" href="#spack.environment.environment.Environment.active" title="Link to this definition"></a></dt>
<dd><p>True if this environment is currently active.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spack.environment.environment.Environment.add">
<span class="sig-name descname"><span class="pre">add</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">user_spec</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">list_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'specs'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spack/environment/environment.html#Environment.add"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.environment.Environment.add" title="Link to this definition"></a></dt>
<dd><p>Add a single user_spec (non-concretized) to the Environment</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><dl class="simple">
<dt>True if the spec was added, False if it was already</dt><dd><p>present and did not need to be added</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>(<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)">bool</a>)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spack.environment.environment.Environment.add_view_to_env">
<span class="sig-name descname"><span class="pre">add_view_to_env</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">env_mod</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="spack.util.html#spack.util.environment.EnvironmentModifications" title="spack.util.environment.EnvironmentModifications"><span class="pre">EnvironmentModifications</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">view</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="spack.util.html#spack.util.environment.EnvironmentModifications" title="spack.util.environment.EnvironmentModifications"><span class="pre">EnvironmentModifications</span></a></span></span><a class="reference internal" href="_modules/spack/environment/environment.html#Environment.add_view_to_env"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.environment.Environment.add_view_to_env" title="Link to this definition"></a></dt>
<dd><p>Collect the environment modifications to activate an environment using the provided
view. Removes duplicate paths.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>env_mod</strong> – the environment modifications object that is modified.</p></li>
<li><p><strong>view</strong> – the name of the view to activate.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spack.environment.environment.Environment.added_specs">
<span class="sig-name descname"><span class="pre">added_specs</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/spack/environment/environment.html#Environment.added_specs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.environment.Environment.added_specs" title="Link to this definition"></a></dt>
<dd><p>Specs that are not yet installed.</p>
<p>Yields the user spec for non-concretized specs, and the concrete
spec for already concretized but not yet installed specs.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spack.environment.environment.Environment.all_concretized_orders">
<span class="sig-name descname"><span class="pre">all_concretized_orders</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.13)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/spack/environment/environment.html#Environment.all_concretized_orders"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.environment.Environment.all_concretized_orders" title="Link to this definition"></a></dt>
<dd><p>Returns all of the concretized order of the environment and
its included environment(s).</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spack.environment.environment.Environment.all_concretized_user_specs">
<span class="sig-name descname"><span class="pre">all_concretized_user_specs</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.13)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="spack.html#spack.spec.Spec" title="spack.spec.Spec"><span class="pre">Spec</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/spack/environment/environment.html#Environment.all_concretized_user_specs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.environment.Environment.all_concretized_user_specs" title="Link to this definition"></a></dt>
<dd><p>Returns all of the concretized user specs of the environment and
its included environment(s).</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spack.environment.environment.Environment.all_hashes">
<span class="sig-name descname"><span class="pre">all_hashes</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/spack/environment/environment.html#Environment.all_hashes"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.environment.Environment.all_hashes" title="Link to this definition"></a></dt>
<dd><p>Return hashes of all specs.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spack.environment.environment.Environment.all_matching_specs">
<span class="sig-name descname"><span class="pre">all_matching_specs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">specs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="spack.html#spack.spec.Spec" title="spack.spec.Spec"><span class="pre">Spec</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.13)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="spack.html#spack.spec.Spec" title="spack.spec.Spec"><span class="pre">Spec</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/spack/environment/environment.html#Environment.all_matching_specs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.environment.Environment.all_matching_specs" title="Link to this definition"></a></dt>
<dd><p>Returns all concretized specs in the environment satisfying any of the input specs</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spack.environment.environment.Environment.all_specs">
<span class="sig-name descname"><span class="pre">all_specs</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.13)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="spack.html#spack.spec.Spec" title="spack.spec.Spec"><span class="pre">Spec</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/spack/environment/environment.html#Environment.all_specs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.environment.Environment.all_specs" title="Link to this definition"></a></dt>
<dd><p>Returns a list of all concrete specs</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spack.environment.environment.Environment.all_specs_generator">
<span class="sig-name descname"><span class="pre">all_specs_generator</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterable" title="(in Python v3.13)"><span class="pre">Iterable</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="spack.html#spack.spec.Spec" title="spack.spec.Spec"><span class="pre">Spec</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/spack/environment/environment.html#Environment.all_specs_generator"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.environment.Environment.all_specs_generator" title="Link to this definition"></a></dt>
<dd><p>Returns a generator for all concrete specs</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spack.environment.environment.Environment.change_existing_spec">
<span class="sig-name descname"><span class="pre">change_existing_spec</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">change_spec</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="spack.html#spack.spec.Spec" title="spack.spec.Spec"><span class="pre">Spec</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">list_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'specs'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">match_spec</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="spack.html#spack.spec.Spec" title="spack.spec.Spec"><span class="pre">Spec</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allow_changing_multiple_specs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spack/environment/environment.html#Environment.change_existing_spec"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.environment.Environment.change_existing_spec" title="Link to this definition"></a></dt>
<dd><p>Find the spec identified by <cite>match_spec</cite> and change it to <cite>change_spec</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>change_spec</strong> – defines the spec properties that
need to be changed. This will not change attributes of the
matched spec unless they conflict with <cite>change_spec</cite>.</p></li>
<li><p><strong>list_name</strong> – identifies the spec list in the environment that
should be modified</p></li>
<li><p><strong>match_spec</strong> – if set, this identifies the spec
that should be changed. If not set, it is assumed we are
looking for a spec with the same name as <cite>change_spec</cite>.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spack.environment.environment.Environment.check_views">
<span class="sig-name descname"><span class="pre">check_views</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/spack/environment/environment.html#Environment.check_views"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.environment.Environment.check_views" title="Link to this definition"></a></dt>
<dd><p>Checks if the environments default view can be activated.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spack.environment.environment.Environment.clear">
<span class="sig-name descname"><span class="pre">clear</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">re_read</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spack/environment/environment.html#Environment.clear"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.environment.Environment.clear" title="Link to this definition"></a></dt>
<dd><p>Clear the contents of the environment</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>re_read</strong> – If <code class="docutils literal notranslate"><span class="pre">True</span></code>, do not clear <code class="docutils literal notranslate"><span class="pre">new_specs</span></code>. This value cannot be read from yaml,
and needs to be maintained when re-reading an existing environment.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spack.environment.environment.Environment.concrete_roots">
<span class="sig-name descname"><span class="pre">concrete_roots</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/spack/environment/environment.html#Environment.concrete_roots"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.environment.Environment.concrete_roots" title="Link to this definition"></a></dt>
<dd><p>Same as concretized_specs, except it returns the list of concrete
roots <em>without</em> associated user spec</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spack.environment.environment.Environment.concretize">
<span class="sig-name descname"><span class="pre">concretize</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">force</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tests</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spack/environment/environment.html#Environment.concretize"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.environment.Environment.concretize" title="Link to this definition"></a></dt>
<dd><p>Concretize user_specs in this environment.</p>
<p>Only concretizes specs that haven’t been concretized yet unless
force is <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p>
<p>This only modifies the environment in memory. <code class="docutils literal notranslate"><span class="pre">write()</span></code> will
write out a lockfile containing concretized specs.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>force</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>) – re-concretize ALL specs, even those that were
already concretized</p></li>
<li><p><strong>tests</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.13)"><em>list</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#set" title="(in Python v3.13)"><em>set</em></a>) – False to run no tests, True to test
all packages, or a list of package names to run tests for some</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>List of specs that have been concretized. Each entry is a tuple of
the user spec and the corresponding concretized spec.</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="spack.environment.environment.Environment.concretized_order">
<span class="sig-name descname"><span class="pre">concretized_order</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.13)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#spack.environment.environment.Environment.concretized_order" title="Link to this definition"></a></dt>
<dd><p>Roots associated with the last concretization, in order</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spack.environment.environment.Environment.concretized_specs">
<span class="sig-name descname"><span class="pre">concretized_specs</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/spack/environment/environment.html#Environment.concretized_specs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.environment.Environment.concretized_specs" title="Link to this definition"></a></dt>
<dd><p>Tuples of (user spec, concrete spec) for all concrete specs.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="spack.environment.environment.Environment.concretized_user_specs">
<span class="sig-name descname"><span class="pre">concretized_user_specs</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.13)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="spack.html#spack.spec.Spec" title="spack.spec.Spec"><span class="pre">Spec</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#spack.environment.environment.Environment.concretized_user_specs" title="Link to this definition"></a></dt>
<dd><p>User specs from the last concretization</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spack.environment.environment.Environment.deconcretize">
<span class="sig-name descname"><span class="pre">deconcretize</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">spec</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="spack.html#spack.spec.Spec" title="spack.spec.Spec"><span class="pre">Spec</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">concrete</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spack/environment/environment.html#Environment.deconcretize"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.environment.Environment.deconcretize" title="Link to this definition"></a></dt>
<dd><p>Remove specified spec from environment concretization</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>spec</strong> – Spec to deconcretize. This must be a root of the environment</p></li>
<li><p><strong>concrete</strong> – If True, find all instances of spec as concrete in the environemnt.
If False, find a single instance of the abstract spec as root of the environment.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="spack.environment.environment.Environment.default_view">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">default_view</span></span><a class="headerlink" href="#spack.environment.environment.Environment.default_view" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spack.environment.environment.Environment.delete_default_view">
<span class="sig-name descname"><span class="pre">delete_default_view</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span></span><a class="reference internal" href="_modules/spack/environment/environment.html#Environment.delete_default_view"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.environment.Environment.delete_default_view" title="Link to this definition"></a></dt>
<dd><p>Deletes the default view associated with this environment.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spack.environment.environment.Environment.destroy">
<span class="sig-name descname"><span class="pre">destroy</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/spack/environment/environment.html#Environment.destroy"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.environment.Environment.destroy" title="Link to this definition"></a></dt>
<dd><p>Remove this environment from Spack entirely.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="spack.environment.environment.Environment.dev_specs">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">dev_specs</span></span><a class="headerlink" href="#spack.environment.environment.Environment.dev_specs" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spack.environment.environment.Environment.ensure_env_directory_exists">
<span class="sig-name descname"><span class="pre">ensure_env_directory_exists</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dot_env</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span></span><a class="reference internal" href="_modules/spack/environment/environment.html#Environment.ensure_env_directory_exists"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.environment.Environment.ensure_env_directory_exists" title="Link to this definition"></a></dt>
<dd><p>Ensure that the root directory of the environment exists</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>dot_env</strong> – if True also ensures that the &lt;root&gt;/.env directory exists</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spack.environment.environment.Environment.filter_specs">
<span class="sig-name descname"><span class="pre">filter_specs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">reader</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">json_specs_by_hash</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">order_concretized</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spack/environment/environment.html#Environment.filter_specs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.environment.Environment.filter_specs" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spack.environment.environment.Environment.get_by_hash">
<span class="sig-name descname"><span class="pre">get_by_hash</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dag_hash</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.13)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="spack.html#spack.spec.Spec" title="spack.spec.Spec"><span class="pre">Spec</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/spack/environment/environment.html#Environment.get_by_hash"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.environment.Environment.get_by_hash" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spack.environment.environment.Environment.get_one_by_hash">
<span class="sig-name descname"><span class="pre">get_one_by_hash</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dag_hash</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spack/environment/environment.html#Environment.get_one_by_hash"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.environment.Environment.get_one_by_hash" title="Link to this definition"></a></dt>
<dd><p>Returns the single spec from the environment which matches the
provided hash.  Raises an AssertionError if no specs match or if
more than one spec matches.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spack.environment.environment.Environment.has_view">
<span class="sig-name descname"><span class="pre">has_view</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">view_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a></span></span><a class="reference internal" href="_modules/spack/environment/environment.html#Environment.has_view"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.environment.Environment.has_view" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spack.environment.environment.Environment.include_concrete_envs">
<span class="sig-name descname"><span class="pre">include_concrete_envs</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/spack/environment/environment.html#Environment.include_concrete_envs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.environment.Environment.include_concrete_envs" title="Link to this definition"></a></dt>
<dd><p>Copy and save the included envs’ specs internally</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="spack.environment.environment.Environment.included_concrete_envs">
<span class="sig-name descname"><span class="pre">included_concrete_envs</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.13)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#spack.environment.environment.Environment.included_concrete_envs" title="Link to this definition"></a></dt>
<dd><p>Environment paths for concrete (lockfile) included environments</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="spack.environment.environment.Environment.included_concrete_spec_data">
<span class="sig-name descname"><span class="pre">included_concrete_spec_data</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.13)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.13)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.13)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#spack.environment.environment.Environment.included_concrete_spec_data" title="Link to this definition"></a></dt>
<dd><p>First-level included concretized spec data from/to the lockfile.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="spack.environment.environment.Environment.included_concretized_order">
<span class="sig-name descname"><span class="pre">included_concretized_order</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.13)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.13)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#spack.environment.environment.Environment.included_concretized_order" title="Link to this definition"></a></dt>
<dd><p>Roots from included environments with the last concretization, in order</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="spack.environment.environment.Environment.included_concretized_user_specs">
<span class="sig-name descname"><span class="pre">included_concretized_user_specs</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.13)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.13)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="spack.html#spack.spec.Spec" title="spack.spec.Spec"><span class="pre">Spec</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#spack.environment.environment.Environment.included_concretized_user_specs" title="Link to this definition"></a></dt>
<dd><p>User specs from included environments from the last concretization</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="spack.environment.environment.Environment.included_specs_by_hash">
<span class="sig-name descname"><span class="pre">included_specs_by_hash</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.13)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.13)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference internal" href="spack.html#spack.spec.Spec" title="spack.spec.Spec"><span class="pre">Spec</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#spack.environment.environment.Environment.included_specs_by_hash" title="Link to this definition"></a></dt>
<dd><p>Concretized specs by hash from the included environments</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="spack.environment.environment.Environment.included_user_specs">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">included_user_specs</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="spack.html#spack.spec_list.SpecList" title="spack.spec_list.SpecList"><span class="pre">SpecList</span></a></em><a class="headerlink" href="#spack.environment.environment.Environment.included_user_specs" title="Link to this definition"></a></dt>
<dd><p>Included concrete user (or root) specs from last concretization.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spack.environment.environment.Environment.install_all">
<span class="sig-name descname"><span class="pre">install_all</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">install_args</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spack/environment/environment.html#Environment.install_all"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.environment.Environment.install_all" title="Link to this definition"></a></dt>
<dd><p>Install all concretized specs in an environment.</p>
<p>Note: this does not regenerate the views for the environment;
that needs to be done separately with a call to write().</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>install_args</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.13)"><em>dict</em></a>) – keyword install arguments</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spack.environment.environment.Environment.install_specs">
<span class="sig-name descname"><span class="pre">install_specs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">specs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.13)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="spack.html#spack.spec.Spec" title="spack.spec.Spec"><span class="pre">Spec</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">install_args</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spack/environment/environment.html#Environment.install_specs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.environment.Environment.install_specs" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spack.environment.environment.Environment.invalidate_repository_cache">
<span class="sig-name descname"><span class="pre">invalidate_repository_cache</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/spack/environment/environment.html#Environment.invalidate_repository_cache"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.environment.Environment.invalidate_repository_cache" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spack.environment.environment.Environment.is_develop">
<span class="sig-name descname"><span class="pre">is_develop</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">spec</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spack/environment/environment.html#Environment.is_develop"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.environment.Environment.is_develop" title="Link to this definition"></a></dt>
<dd><p>Returns true when the spec is built from local sources</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="spack.environment.environment.Environment.lock_path">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">lock_path</span></span><a class="headerlink" href="#spack.environment.environment.Environment.lock_path" title="Link to this definition"></a></dt>
<dd><p>Path to spack.lock file in this environment.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="spack.environment.environment.Environment.manifest_path">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">manifest_path</span></span><a class="headerlink" href="#spack.environment.environment.Environment.manifest_path" title="Link to this definition"></a></dt>
<dd><p>Path to spack.yaml file in this environment.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spack.environment.environment.Environment.manifest_uptodate_or_warn">
<span class="sig-name descname"><span class="pre">manifest_uptodate_or_warn</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/spack/environment/environment.html#Environment.manifest_uptodate_or_warn"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.environment.Environment.manifest_uptodate_or_warn" title="Link to this definition"></a></dt>
<dd><p>Emits a warning if the manifest file is not up-to-date.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spack.environment.environment.Environment.matching_spec">
<span class="sig-name descname"><span class="pre">matching_spec</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">spec</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spack/environment/environment.html#Environment.matching_spec"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.environment.Environment.matching_spec" title="Link to this definition"></a></dt>
<dd><p>Given a spec (likely not concretized), find a matching concretized
spec in the environment.</p>
<p>The matching spec does not have to be installed in the environment,
but must be concrete (specs added with <cite>spack add</cite> without an
intervening <cite>spack concretize</cite> will not be matched).</p>
<p>If there is a single root spec that matches the provided spec or a
single dependency spec that matches the provided spec, then the
concretized instance of that spec will be returned.</p>
<p>If multiple root specs match the provided spec, or no root specs match
and multiple dependency specs match, then this raises an error
and reports all matching specs.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="spack.environment.environment.Environment.new_specs">
<span class="sig-name descname"><span class="pre">new_specs</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.13)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="spack.html#spack.spec.Spec" title="spack.spec.Spec"><span class="pre">Spec</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#spack.environment.environment.Environment.new_specs" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spack.environment.environment.Environment.regenerate_views">
<span class="sig-name descname"><span class="pre">regenerate_views</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/spack/environment/environment.html#Environment.regenerate_views"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.environment.Environment.regenerate_views" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spack.environment.environment.Environment.remove">
<span class="sig-name descname"><span class="pre">remove</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">query_spec</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">list_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'specs'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">force</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spack/environment/environment.html#Environment.remove"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.environment.Environment.remove" title="Link to this definition"></a></dt>
<dd><p>Remove specs from an environment that match a query_spec</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spack.environment.environment.Environment.removed_specs">
<span class="sig-name descname"><span class="pre">removed_specs</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/spack/environment/environment.html#Environment.removed_specs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.environment.Environment.removed_specs" title="Link to this definition"></a></dt>
<dd><p>Tuples of (user spec, concrete spec) for all specs that will be
removed on next concretize.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="spack.environment.environment.Environment.repo">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">repo</span></span><a class="headerlink" href="#spack.environment.environment.Environment.repo" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="spack.environment.environment.Environment.repos_path">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">repos_path</span></span><a class="headerlink" href="#spack.environment.environment.Environment.repos_path" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spack.environment.environment.Environment.rm_view_from_env">
<span class="sig-name descname"><span class="pre">rm_view_from_env</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">env_mod</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="spack.util.html#spack.util.environment.EnvironmentModifications" title="spack.util.environment.EnvironmentModifications"><span class="pre">EnvironmentModifications</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">view</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="spack.util.html#spack.util.environment.EnvironmentModifications" title="spack.util.environment.EnvironmentModifications"><span class="pre">EnvironmentModifications</span></a></span></span><a class="reference internal" href="_modules/spack/environment/environment.html#Environment.rm_view_from_env"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.environment.Environment.rm_view_from_env" title="Link to this definition"></a></dt>
<dd><p>Collect the environment modifications to deactivate an environment using the provided
view. Reverses the action of <code class="docutils literal notranslate"><span class="pre">add_view_to_env</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>env_mod</strong> – the environment modifications object that is modified.</p></li>
<li><p><strong>view</strong> – the name of the view to deactivate.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spack.environment.environment.Environment.roots">
<span class="sig-name descname"><span class="pre">roots</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/spack/environment/environment.html#Environment.roots"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.environment.Environment.roots" title="Link to this definition"></a></dt>
<dd><p>Specs explicitly requested by the user <em>in this environment</em>.</p>
<p>Yields both added and installed specs that have user specs in
<cite>spack.yaml</cite>.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="spack.environment.environment.Environment.scope_name">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">scope_name</span></span><a class="headerlink" href="#spack.environment.environment.Environment.scope_name" title="Link to this definition"></a></dt>
<dd><p>Name of the config scope of this environment’s manifest file.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spack.environment.environment.Environment.set_included_concretized_user_specs">
<span class="sig-name descname"><span class="pre">set_included_concretized_user_specs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">env_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">env_info</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.13)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.13)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.13)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">included_json_specs_by_hash</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.13)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.13)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.13)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.13)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.13)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.13)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/spack/environment/environment.html#Environment.set_included_concretized_user_specs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.environment.Environment.set_included_concretized_user_specs" title="Link to this definition"></a></dt>
<dd><p>Sets all of the concretized user specs from included environments
to include those from nested included environments.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>env_name</strong> – the name (technically the path) of the included environment</p></li>
<li><p><strong>env_info</strong> – included concrete environment data</p></li>
<li><p><strong>included_json_specs_by_hash</strong> – concrete spec data keyed by hash</p></li>
</ul>
</dd>
</dl>
<p>Returns: updated specs_by_hash</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="spack.environment.environment.Environment.spec_lists">
<span class="sig-name descname"><span class="pre">spec_lists</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.13)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference internal" href="spack.html#spack.spec_list.SpecList" title="spack.spec_list.SpecList"><span class="pre">SpecList</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#spack.environment.environment.Environment.spec_lists" title="Link to this definition"></a></dt>
<dd><p>Specs from “spack.yaml”</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="spack.environment.environment.Environment.specs_by_hash">
<span class="sig-name descname"><span class="pre">specs_by_hash</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.13)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference internal" href="spack.html#spack.spec.Spec" title="spack.spec.Spec"><span class="pre">Spec</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#spack.environment.environment.Environment.specs_by_hash" title="Link to this definition"></a></dt>
<dd><p>Concretized specs by hash</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="spack.environment.environment.Environment.unify">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">unify</span></span><a class="headerlink" href="#spack.environment.environment.Environment.unify" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spack.environment.environment.Environment.uninstalled_specs">
<span class="sig-name descname"><span class="pre">uninstalled_specs</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/spack/environment/environment.html#Environment.uninstalled_specs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.environment.Environment.uninstalled_specs" title="Link to this definition"></a></dt>
<dd><p>Return root specs that are not installed, or are installed, but
are development specs themselves or have those among their dependencies.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spack.environment.environment.Environment.update_default_view">
<span class="sig-name descname"><span class="pre">update_default_view</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path_or_bool</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span></span><a class="reference internal" href="_modules/spack/environment/environment.html#Environment.update_default_view"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.environment.Environment.update_default_view" title="Link to this definition"></a></dt>
<dd><p>Updates the path of the default view.</p>
<p>If the argument passed as input is False the default view is deleted, if present. The
manifest will have an entry “view: false”.</p>
<p>If the argument passed as input is True a default view is created, if not already present.
The manifest will have an entry “view: true”. If a default view is already declared, it
will be left untouched.</p>
<p>If the argument passed as input is a path a default view pointing to that path is created,
if not present already. If a default view is already declared, only its “root” will be
changed.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>path_or_bool</strong> – either True, or False or a path</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spack.environment.environment.Environment.update_environment_repository">
<span class="sig-name descname"><span class="pre">update_environment_repository</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span></span><a class="reference internal" href="_modules/spack/environment/environment.html#Environment.update_environment_repository"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.environment.Environment.update_environment_repository" title="Link to this definition"></a></dt>
<dd><p>Updates the repository associated with the environment.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spack.environment.environment.Environment.update_lockfile">
<span class="sig-name descname"><span class="pre">update_lockfile</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span></span><a class="reference internal" href="_modules/spack/environment/environment.html#Environment.update_lockfile"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.environment.Environment.update_lockfile" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spack.environment.environment.Environment.update_stale_references">
<span class="sig-name descname"><span class="pre">update_stale_references</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">from_list</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spack/environment/environment.html#Environment.update_stale_references"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.environment.Environment.update_stale_references" title="Link to this definition"></a></dt>
<dd><p>Iterate over spec lists updating references.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="spack.environment.environment.Environment.user_specs">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">user_specs</span></span><a class="headerlink" href="#spack.environment.environment.Environment.user_specs" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="spack.environment.environment.Environment.view_path_default">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">view_path_default</span></span><a class="headerlink" href="#spack.environment.environment.Environment.view_path_default" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="spack.environment.environment.Environment.views">
<span class="sig-name descname"><span class="pre">views</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.13)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference internal" href="#spack.environment.environment.ViewDescriptor" title="spack.environment.environment.ViewDescriptor"><span class="pre">ViewDescriptor</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#spack.environment.environment.Environment.views" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spack.environment.environment.Environment.write">
<span class="sig-name descname"><span class="pre">write</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">regenerate</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span></span><a class="reference internal" href="_modules/spack/environment/environment.html#Environment.write"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.environment.Environment.write" title="Link to this definition"></a></dt>
<dd><p>Writes an in-memory environment to its location on disk.</p>
<p>Write out package files for each newly concretized spec.  Also
regenerate any views associated with the environment and run post-write
hooks, if regenerate is True.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>regenerate</strong> – regenerate views and run post-write hooks as well as writing if True.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spack.environment.environment.Environment.write_transaction">
<span class="sig-name descname"><span class="pre">write_transaction</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/spack/environment/environment.html#Environment.write_transaction"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.environment.Environment.write_transaction" title="Link to this definition"></a></dt>
<dd><p>Get a write lock context manager for use in a <cite>with</cite> block.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="spack.environment.environment.EnvironmentManifestFile">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">spack.environment.environment.</span></span><span class="sig-name descname"><span class="pre">EnvironmentManifestFile</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">manifest_dir</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Path</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spack/environment/environment.html#EnvironmentManifestFile"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.environment.EnvironmentManifestFile" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Mapping" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mapping</span></code></a></p>
<p>Manages the in-memory representation of a manifest file, and its synchronization
with the actual manifest on disk.</p>
<dl class="py method">
<dt class="sig sig-object py" id="spack.environment.environment.EnvironmentManifestFile.add_definition">
<span class="sig-name descname"><span class="pre">add_definition</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">user_spec</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">list_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span></span><a class="reference internal" href="_modules/spack/environment/environment.html#EnvironmentManifestFile.add_definition"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.environment.EnvironmentManifestFile.add_definition" title="Link to this definition"></a></dt>
<dd><p>Appends a user spec to the first active definition matching the name passed as argument.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>user_spec</strong> – user spec to be appended</p></li>
<li><p><strong>list_name</strong> – name of the definition where to append</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#spack.environment.environment.SpackEnvironmentError" title="spack.environment.environment.SpackEnvironmentError"><strong>SpackEnvironmentError</strong></a> – is no valid definition exists already</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spack.environment.environment.EnvironmentManifestFile.add_user_spec">
<span class="sig-name descname"><span class="pre">add_user_spec</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">user_spec</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span></span><a class="reference internal" href="_modules/spack/environment/environment.html#EnvironmentManifestFile.add_user_spec"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.environment.EnvironmentManifestFile.add_user_spec" title="Link to this definition"></a></dt>
<dd><p>Appends the user spec passed as input to the list of root specs.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>user_spec</strong> – user spec to be appended</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spack.environment.environment.EnvironmentManifestFile.clear">
<span class="sig-name descname"><span class="pre">clear</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span></span><a class="reference internal" href="_modules/spack/environment/environment.html#EnvironmentManifestFile.clear"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.environment.EnvironmentManifestFile.clear" title="Link to this definition"></a></dt>
<dd><p>Clear all user specs from the list of root specs</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="spack.environment.environment.EnvironmentManifestFile.configuration">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">configuration</span></span><a class="headerlink" href="#spack.environment.environment.EnvironmentManifestFile.configuration" title="Link to this definition"></a></dt>
<dd><p>Return the dictionaries in the pristine YAML, without the top level attribute</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spack.environment.environment.EnvironmentManifestFile.deactivate_config_scope">
<span class="sig-name descname"><span class="pre">deactivate_config_scope</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span></span><a class="reference internal" href="_modules/spack/environment/environment.html#EnvironmentManifestFile.deactivate_config_scope"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.environment.EnvironmentManifestFile.deactivate_config_scope" title="Link to this definition"></a></dt>
<dd><p>Remove any of the manifest’s scopes from the global config path.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="spack.environment.environment.EnvironmentManifestFile.env_config_scopes">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">env_config_scopes</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.13)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="spack.html#spack.config.ConfigScope" title="spack.config.ConfigScope"><span class="pre">ConfigScope</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#spack.environment.environment.EnvironmentManifestFile.env_config_scopes" title="Link to this definition"></a></dt>
<dd><p>A list of all configuration scopes for the environment manifest. On the first call this
instantiates all the scopes, on subsequent calls it returns the cached list.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spack.environment.environment.EnvironmentManifestFile.flush">
<span class="sig-name descname"><span class="pre">flush</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span></span><a class="reference internal" href="_modules/spack/environment/environment.html#EnvironmentManifestFile.flush"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.environment.EnvironmentManifestFile.flush" title="Link to this definition"></a></dt>
<dd><p>Synchronizes the object with the manifest file on disk.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spack.environment.environment.EnvironmentManifestFile.from_lockfile">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_lockfile</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">manifest_dir</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Path</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#spack.environment.environment.EnvironmentManifestFile" title="spack.environment.environment.EnvironmentManifestFile"><span class="pre">EnvironmentManifestFile</span></a></span></span><a class="reference internal" href="_modules/spack/environment/environment.html#EnvironmentManifestFile.from_lockfile"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.environment.EnvironmentManifestFile.from_lockfile" title="Link to this definition"></a></dt>
<dd><p>Returns an environment manifest file compatible with the lockfile already present in
the environment directory.</p>
<p>This function also writes a spack.yaml file that is consistent with the spack.lock
already existing in the directory.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>manifest_dir</strong> – directory containing the manifest and lockfile</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="spack.environment.environment.EnvironmentManifestFile.included_config_scopes">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">included_config_scopes</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.13)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="spack.html#spack.config.ConfigScope" title="spack.config.ConfigScope"><span class="pre">ConfigScope</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#spack.environment.environment.EnvironmentManifestFile.included_config_scopes" title="Link to this definition"></a></dt>
<dd><p>List of included configuration scopes from the manifest.</p>
<p>Scopes are listed in the YAML file in order from highest to
lowest precedence, so configuration from earlier scope will take
precedence over later ones.</p>
<p>This routine returns them in the order they should be pushed onto
the internal scope stack (so, in reverse, from lowest to highest).</p>
<p>Returns: Configuration scopes associated with the environment manifest</p>
<dl class="field-list simple">
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#spack.environment.environment.SpackEnvironmentError" title="spack.environment.environment.SpackEnvironmentError"><strong>SpackEnvironmentError</strong></a> – if the manifest includes a remote file but
    no configuration stage directory has been identified</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spack.environment.environment.EnvironmentManifestFile.override_definition">
<span class="sig-name descname"><span class="pre">override_definition</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">user_spec</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">override</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">list_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span></span><a class="reference internal" href="_modules/spack/environment/environment.html#EnvironmentManifestFile.override_definition"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.environment.EnvironmentManifestFile.override_definition" title="Link to this definition"></a></dt>
<dd><p>Overrides a user spec from an active definition that matches the name passed
as argument.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>user_spec</strong> – user spec to be overridden</p></li>
<li><p><strong>override</strong> – new spec to be used</p></li>
<li><p><strong>list_name</strong> – name of the definition where to override the spec</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#spack.environment.environment.SpackEnvironmentError" title="spack.environment.environment.SpackEnvironmentError"><strong>SpackEnvironmentError</strong></a> – if the user spec cannot be overridden</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spack.environment.environment.EnvironmentManifestFile.override_user_spec">
<span class="sig-name descname"><span class="pre">override_user_spec</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">user_spec</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">idx</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span></span><a class="reference internal" href="_modules/spack/environment/environment.html#EnvironmentManifestFile.override_user_spec"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.environment.EnvironmentManifestFile.override_user_spec" title="Link to this definition"></a></dt>
<dd><p>Overrides the user spec at index idx with the one passed as input.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>user_spec</strong> – new user spec</p></li>
<li><p><strong>idx</strong> – index of the spec to be overridden</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#spack.environment.environment.SpackEnvironmentError" title="spack.environment.environment.SpackEnvironmentError"><strong>SpackEnvironmentError</strong></a> – when the user spec cannot be overridden</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spack.environment.environment.EnvironmentManifestFile.prepare_config_scope">
<span class="sig-name descname"><span class="pre">prepare_config_scope</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span></span><a class="reference internal" href="_modules/spack/environment/environment.html#EnvironmentManifestFile.prepare_config_scope"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.environment.EnvironmentManifestFile.prepare_config_scope" title="Link to this definition"></a></dt>
<dd><p>Add the manifest’s scopes to the global configuration search path.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spack.environment.environment.EnvironmentManifestFile.remove_default_view">
<span class="sig-name descname"><span class="pre">remove_default_view</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span></span><a class="reference internal" href="_modules/spack/environment/environment.html#EnvironmentManifestFile.remove_default_view"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.environment.EnvironmentManifestFile.remove_default_view" title="Link to this definition"></a></dt>
<dd><p>Removes the default view from the manifest file</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spack.environment.environment.EnvironmentManifestFile.remove_definition">
<span class="sig-name descname"><span class="pre">remove_definition</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">user_spec</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">list_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span></span><a class="reference internal" href="_modules/spack/environment/environment.html#EnvironmentManifestFile.remove_definition"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.environment.EnvironmentManifestFile.remove_definition" title="Link to this definition"></a></dt>
<dd><p>Removes a user spec from an active definition that matches the name passed as argument.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>user_spec</strong> – user spec to be removed</p></li>
<li><p><strong>list_name</strong> – name of the definition where to remove the spec from</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#spack.environment.environment.SpackEnvironmentError" title="spack.environment.environment.SpackEnvironmentError"><strong>SpackEnvironmentError</strong></a> – if the user spec cannot be removed from the list,
    or the list does not exist</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spack.environment.environment.EnvironmentManifestFile.remove_user_spec">
<span class="sig-name descname"><span class="pre">remove_user_spec</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">user_spec</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span></span><a class="reference internal" href="_modules/spack/environment/environment.html#EnvironmentManifestFile.remove_user_spec"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.environment.EnvironmentManifestFile.remove_user_spec" title="Link to this definition"></a></dt>
<dd><p>Removes the user spec passed as input from the list of root specs</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>user_spec</strong> – user spec to be removed</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#spack.environment.environment.SpackEnvironmentError" title="spack.environment.environment.SpackEnvironmentError"><strong>SpackEnvironmentError</strong></a> – when the user spec is not in the list</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spack.environment.environment.EnvironmentManifestFile.set_default_view">
<span class="sig-name descname"><span class="pre">set_default_view</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">view</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Path</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.13)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span></span><a class="reference internal" href="_modules/spack/environment/environment.html#EnvironmentManifestFile.set_default_view"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.environment.EnvironmentManifestFile.set_default_view" title="Link to this definition"></a></dt>
<dd><p>Sets the default view root in the manifest to the value passed as input.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>view</strong> – If the value is a string or a path, it specifies the path to the view. If
True the default view is used for the environment, if False there’s no view.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spack.environment.environment.EnvironmentManifestFile.set_include_concrete">
<span class="sig-name descname"><span class="pre">set_include_concrete</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">include_concrete</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.13)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span></span><a class="reference internal" href="_modules/spack/environment/environment.html#EnvironmentManifestFile.set_include_concrete"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.environment.EnvironmentManifestFile.set_include_concrete" title="Link to this definition"></a></dt>
<dd><p>Sets the included concrete environments in the manifest to the value(s) passed as input.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>include_concrete</strong> – list of already existing concrete environments to include</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spack.environment.environment.EnvironmentManifestFile.use_config">
<span class="sig-name descname"><span class="pre">use_config</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/spack/environment/environment.html#EnvironmentManifestFile.use_config"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.environment.EnvironmentManifestFile.use_config" title="Link to this definition"></a></dt>
<dd><p>Ensure only the manifest’s configuration scopes are global.</p>
</dd></dl>

</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="spack.environment.environment.SpackEnvironmentConfigError">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">spack.environment.environment.</span></span><span class="sig-name descname"><span class="pre">SpackEnvironmentConfigError</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">message</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">long_message</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spack/environment/environment.html#SpackEnvironmentConfigError"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.environment.SpackEnvironmentConfigError" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#spack.environment.environment.SpackEnvironmentError" title="spack.environment.environment.SpackEnvironmentError"><code class="xref py py-class docutils literal notranslate"><span class="pre">SpackEnvironmentError</span></code></a></p>
<p>Class for Spack environment-specific configuration errors.</p>
</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="spack.environment.environment.SpackEnvironmentError">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">spack.environment.environment.</span></span><span class="sig-name descname"><span class="pre">SpackEnvironmentError</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">message</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">long_message</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spack/environment/environment.html#SpackEnvironmentError"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.environment.SpackEnvironmentError" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="spack.html#spack.error.SpackError" title="spack.error.SpackError"><code class="xref py py-class docutils literal notranslate"><span class="pre">SpackError</span></code></a></p>
<p>Superclass for all errors to do with Spack environments.</p>
</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="spack.environment.environment.SpackEnvironmentViewError">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">spack.environment.environment.</span></span><span class="sig-name descname"><span class="pre">SpackEnvironmentViewError</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">message</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">long_message</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spack/environment/environment.html#SpackEnvironmentViewError"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.environment.SpackEnvironmentViewError" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#spack.environment.environment.SpackEnvironmentError" title="spack.environment.environment.SpackEnvironmentError"><code class="xref py py-class docutils literal notranslate"><span class="pre">SpackEnvironmentError</span></code></a></p>
<p>Class for errors regarding view generation.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="spack.environment.environment.ViewDescriptor">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">spack.environment.environment.</span></span><span class="sig-name descname"><span class="pre">ViewDescriptor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">base_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">root</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">projections</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">select</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exclude</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">link</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'all'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">link_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'symlink'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spack/environment/environment.html#ViewDescriptor"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.environment.ViewDescriptor" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="spack.environment.environment.ViewDescriptor.content_hash">
<span class="sig-name descname"><span class="pre">content_hash</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">specs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spack/environment/environment.html#ViewDescriptor.content_hash"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.environment.ViewDescriptor.content_hash" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spack.environment.environment.ViewDescriptor.exclude_fn">
<span class="sig-name descname"><span class="pre">exclude_fn</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">spec</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spack/environment/environment.html#ViewDescriptor.exclude_fn"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.environment.ViewDescriptor.exclude_fn" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spack.environment.environment.ViewDescriptor.from_dict">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_dict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">base_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">d</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spack/environment/environment.html#ViewDescriptor.from_dict"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.environment.ViewDescriptor.from_dict" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spack.environment.environment.ViewDescriptor.get_projection_for_spec">
<span class="sig-name descname"><span class="pre">get_projection_for_spec</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">spec</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spack/environment/environment.html#ViewDescriptor.get_projection_for_spec"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.environment.ViewDescriptor.get_projection_for_spec" title="Link to this definition"></a></dt>
<dd><p>Get projection for spec. This function does not require the view
to exist on the filesystem.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spack.environment.environment.ViewDescriptor.regenerate">
<span class="sig-name descname"><span class="pre">regenerate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">concrete_roots</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.13)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="spack.html#spack.spec.Spec" title="spack.spec.Spec"><span class="pre">Spec</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span></span><a class="reference internal" href="_modules/spack/environment/environment.html#ViewDescriptor.regenerate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.environment.ViewDescriptor.regenerate" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spack.environment.environment.ViewDescriptor.select_fn">
<span class="sig-name descname"><span class="pre">select_fn</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">spec</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spack/environment/environment.html#ViewDescriptor.select_fn"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.environment.ViewDescriptor.select_fn" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spack.environment.environment.ViewDescriptor.specs_for_view">
<span class="sig-name descname"><span class="pre">specs_for_view</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">concrete_roots</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.13)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="spack.html#spack.spec.Spec" title="spack.spec.Spec"><span class="pre">Spec</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.13)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="spack.html#spack.spec.Spec" title="spack.spec.Spec"><span class="pre">Spec</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/spack/environment/environment.html#ViewDescriptor.specs_for_view"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.environment.ViewDescriptor.specs_for_view" title="Link to this definition"></a></dt>
<dd><p>Flatten the DAGs of the concrete roots, keep only unique, selected, and installed specs
in topological order from root to leaf.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spack.environment.environment.ViewDescriptor.to_dict">
<span class="sig-name descname"><span class="pre">to_dict</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/spack/environment/environment.html#ViewDescriptor.to_dict"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.environment.ViewDescriptor.to_dict" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spack.environment.environment.ViewDescriptor.update_root">
<span class="sig-name descname"><span class="pre">update_root</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">new_path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spack/environment/environment.html#ViewDescriptor.update_root"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.environment.ViewDescriptor.update_root" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spack.environment.environment.ViewDescriptor.view">
<span class="sig-name descname"><span class="pre">view</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">new</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">SimpleFilesystemView</span></span></span><a class="reference internal" href="_modules/spack/environment/environment.html#ViewDescriptor.view"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.environment.ViewDescriptor.view" title="Link to this definition"></a></dt>
<dd><p>Returns a view object for the <em>underlying</em> view directory. This means that the
self.root symlink is followed, and that the view has to exist on the filesystem
(unless <code class="docutils literal notranslate"><span class="pre">new</span></code>). This function is useful when writing to the view.</p>
<p>Raise if new is None and there is no current view</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>new</strong> – If a string, create a FilesystemView rooted at that path. Default None. This
should only be used to regenerate the view, and cannot be used to access specs.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spack.environment.environment.activate">
<span class="sig-prename descclassname"><span class="pre">spack.environment.environment.</span></span><span class="sig-name descname"><span class="pre">activate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">env</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_env_repo</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spack/environment/environment.html#activate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.environment.activate" title="Link to this definition"></a></dt>
<dd><p>Activate an environment.</p>
<p>To activate an environment, we add its manifest’s configuration scope to the
existing Spack configuration, and we set active to the current environment.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>env</strong> (<a class="reference internal" href="#spack.environment.environment.Environment" title="spack.environment.environment.Environment"><em>Environment</em></a>) – the environment to activate</p></li>
<li><p><strong>use_env_repo</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>) – use the packages exactly as they appear in the
environment’s repository</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spack.environment.environment.active">
<span class="sig-prename descclassname"><span class="pre">spack.environment.environment.</span></span><span class="sig-name descname"><span class="pre">active</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spack/environment/environment.html#active"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.environment.active" title="Link to this definition"></a></dt>
<dd><p>True if the named environment is active.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spack.environment.environment.active_environment">
<span class="sig-prename descclassname"><span class="pre">spack.environment.environment.</span></span><span class="sig-name descname"><span class="pre">active_environment</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#spack.environment.environment.Environment" title="spack.environment.environment.Environment"><span class="pre">Environment</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span></span><a class="reference internal" href="_modules/spack/environment/environment.html#active_environment"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.environment.active_environment" title="Link to this definition"></a></dt>
<dd><p>Returns the active environment when there is any</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spack.environment.environment.all_environment_names">
<span class="sig-prename descclassname"><span class="pre">spack.environment.environment.</span></span><span class="sig-name descname"><span class="pre">all_environment_names</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/spack/environment/environment.html#all_environment_names"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.environment.all_environment_names" title="Link to this definition"></a></dt>
<dd><p>List the names of environments that currently exist.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spack.environment.environment.all_environments">
<span class="sig-prename descclassname"><span class="pre">spack.environment.environment.</span></span><span class="sig-name descname"><span class="pre">all_environments</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/spack/environment/environment.html#all_environments"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.environment.all_environments" title="Link to this definition"></a></dt>
<dd><p>Generator for all managed Environments.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spack.environment.environment.as_env_dir">
<span class="sig-prename descclassname"><span class="pre">spack.environment.environment.</span></span><span class="sig-name descname"><span class="pre">as_env_dir</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name_or_dir</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spack/environment/environment.html#as_env_dir"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.environment.as_env_dir" title="Link to this definition"></a></dt>
<dd><p>Translate an environment name or directory to the environment directory</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spack.environment.environment.create">
<span class="sig-prename descclassname"><span class="pre">spack.environment.environment.</span></span><span class="sig-name descname"><span class="pre">create</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">init_file</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Path</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">with_view</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Path</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keep_relative</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">include_concrete</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.13)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#spack.environment.environment.Environment" title="spack.environment.environment.Environment"><span class="pre">Environment</span></a></span></span><a class="reference internal" href="_modules/spack/environment/environment.html#create"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.environment.create" title="Link to this definition"></a></dt>
<dd><p>Create a managed environment in Spack and returns it.</p>
<p>A managed environment is created in a root directory managed by this Spack instance, so that
Spack can keep track of them.</p>
<p>Files with suffix <code class="docutils literal notranslate"><span class="pre">.json</span></code> or <code class="docutils literal notranslate"><span class="pre">.lock</span></code> are considered lockfiles. Files with any other name
are considered manifest files.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> – name of the managed environment</p></li>
<li><p><strong>init_file</strong> – either a lockfile, a manifest file, or None</p></li>
<li><p><strong>with_view</strong> – whether a view should be maintained for the environment. If the value is a
string, it specifies the path to the view</p></li>
<li><p><strong>keep_relative</strong> – if True, develop paths are copied verbatim into the new environment file,
otherwise they are made absolute</p></li>
<li><p><strong>include_concrete</strong> – list of concrete environment names/paths to be included</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spack.environment.environment.create_in_dir">
<span class="sig-prename descclassname"><span class="pre">spack.environment.environment.</span></span><span class="sig-name descname"><span class="pre">create_in_dir</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">root</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">init_file</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Path</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">with_view</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Path</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keep_relative</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">include_concrete</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.13)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#spack.environment.environment.Environment" title="spack.environment.environment.Environment"><span class="pre">Environment</span></a></span></span><a class="reference internal" href="_modules/spack/environment/environment.html#create_in_dir"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.environment.create_in_dir" title="Link to this definition"></a></dt>
<dd><p>Create an environment in the directory passed as input and returns it.</p>
<p>Files with suffix <code class="docutils literal notranslate"><span class="pre">.json</span></code> or <code class="docutils literal notranslate"><span class="pre">.lock</span></code> are considered lockfiles. Files with any other name
are considered manifest files.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>root</strong> – directory where to create the environment.</p></li>
<li><p><strong>init_file</strong> – either a lockfile, a manifest file, or None</p></li>
<li><p><strong>with_view</strong> – whether a view should be maintained for the environment. If the value is a
string, it specifies the path to the view</p></li>
<li><p><strong>keep_relative</strong> – if True, develop paths are copied verbatim into the new environment file,
otherwise they are made absolute</p></li>
<li><p><strong>include_concrete</strong> – concrete environment names/paths to be included</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spack.environment.environment.deactivate">
<span class="sig-prename descclassname"><span class="pre">spack.environment.environment.</span></span><span class="sig-name descname"><span class="pre">deactivate</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/spack/environment/environment.html#deactivate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.environment.deactivate" title="Link to this definition"></a></dt>
<dd><p>Undo any configuration or repo settings modified by <code class="docutils literal notranslate"><span class="pre">activate()</span></code>.</p>
</dd></dl>

<dl class="py data">
<dt class="sig sig-object py" id="spack.environment.environment.default_env_path">
<span class="sig-prename descclassname"><span class="pre">spack.environment.environment.</span></span><span class="sig-name descname"><span class="pre">default_env_path</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'/home/runner/work/spack/spack/var/spack/environments'</span></em><a class="headerlink" href="#spack.environment.environment.default_env_path" title="Link to this definition"></a></dt>
<dd><p>default path where environments are stored in the spack tree</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spack.environment.environment.default_manifest_yaml">
<span class="sig-prename descclassname"><span class="pre">spack.environment.environment.</span></span><span class="sig-name descname"><span class="pre">default_manifest_yaml</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/spack/environment/environment.html#default_manifest_yaml"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.environment.default_manifest_yaml" title="Link to this definition"></a></dt>
<dd><p>default spack.yaml file to put in new environments</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spack.environment.environment.display_specs">
<span class="sig-prename descclassname"><span class="pre">spack.environment.environment.</span></span><span class="sig-name descname"><span class="pre">display_specs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">specs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spack/environment/environment.html#display_specs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.environment.display_specs" title="Link to this definition"></a></dt>
<dd><p>Displays a list of specs traversed breadth-first, covering nodes, with install status.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>specs</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.13)"><em>list</em></a>) – list of specs</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spack.environment.environment.ensure_env_root_path_exists">
<span class="sig-prename descclassname"><span class="pre">spack.environment.environment.</span></span><span class="sig-name descname"><span class="pre">ensure_env_root_path_exists</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/spack/environment/environment.html#ensure_env_root_path_exists"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.environment.ensure_env_root_path_exists" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spack.environment.environment.ensure_no_disallowed_env_config_mods">
<span class="sig-prename descclassname"><span class="pre">spack.environment.environment.</span></span><span class="sig-name descname"><span class="pre">ensure_no_disallowed_env_config_mods</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">scopes</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.13)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="spack.html#spack.config.ConfigScope" title="spack.config.ConfigScope"><span class="pre">ConfigScope</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span></span><a class="reference internal" href="_modules/spack/environment/environment.html#ensure_no_disallowed_env_config_mods"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.environment.ensure_no_disallowed_env_config_mods" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spack.environment.environment.env_root_path">
<span class="sig-prename descclassname"><span class="pre">spack.environment.environment.</span></span><span class="sig-name descname"><span class="pre">env_root_path</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></span><a class="reference internal" href="_modules/spack/environment/environment.html#env_root_path"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.environment.env_root_path" title="Link to this definition"></a></dt>
<dd><p>Override default root path if the user specified it</p>
</dd></dl>

<dl class="py data">
<dt class="sig sig-object py" id="spack.environment.environment.env_subdir_name">
<span class="sig-prename descclassname"><span class="pre">spack.environment.environment.</span></span><span class="sig-name descname"><span class="pre">env_subdir_name</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'.spack-env'</span></em><a class="headerlink" href="#spack.environment.environment.env_subdir_name" title="Link to this definition"></a></dt>
<dd><p>Name of the directory where environments store repos, logs, views, configs</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spack.environment.environment.env_subdir_path">
<span class="sig-prename descclassname"><span class="pre">spack.environment.environment.</span></span><span class="sig-name descname"><span class="pre">env_subdir_path</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">manifest_dir</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Path</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></span><a class="reference internal" href="_modules/spack/environment/environment.html#env_subdir_path"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.environment.env_subdir_path" title="Link to this definition"></a></dt>
<dd><p>Path to where the environment stores repos, logs, views, configs.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>manifest_dir</strong> – directory containing the environment manifest file</p>
</dd>
</dl>
<p>Returns:  directory the environment uses to manage its files</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spack.environment.environment.environment_dir_from_name">
<span class="sig-prename descclassname"><span class="pre">spack.environment.environment.</span></span><span class="sig-name descname"><span class="pre">environment_dir_from_name</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">exists_ok</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></span><a class="reference internal" href="_modules/spack/environment/environment.html#environment_dir_from_name"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.environment.environment_dir_from_name" title="Link to this definition"></a></dt>
<dd><p>Returns the directory associated with a named environment.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> – name of the environment</p></li>
<li><p><strong>exists_ok</strong> – if False, raise an error if the environment exists already</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#spack.environment.environment.SpackEnvironmentError" title="spack.environment.environment.SpackEnvironmentError"><strong>SpackEnvironmentError</strong></a> – if exists_ok is False and the environment exists already</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spack.environment.environment.environment_from_name_or_dir">
<span class="sig-prename descclassname"><span class="pre">spack.environment.environment.</span></span><span class="sig-name descname"><span class="pre">environment_from_name_or_dir</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name_or_dir</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spack/environment/environment.html#environment_from_name_or_dir"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.environment.environment_from_name_or_dir" title="Link to this definition"></a></dt>
<dd><p>Get an environment with the supplied name.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spack.environment.environment.environment_name">
<span class="sig-prename descclassname"><span class="pre">spack.environment.environment.</span></span><span class="sig-name descname"><span class="pre">environment_name</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Path</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></span><a class="reference internal" href="_modules/spack/environment/environment.html#environment_name"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.environment.environment_name" title="Link to this definition"></a></dt>
<dd><p>Human-readable representation of the environment.</p>
<p>This is the path for directory environments, and just the name
for managed environments.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spack.environment.environment.exists">
<span class="sig-prename descclassname"><span class="pre">spack.environment.environment.</span></span><span class="sig-name descname"><span class="pre">exists</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spack/environment/environment.html#exists"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.environment.exists" title="Link to this definition"></a></dt>
<dd><p>Whether an environment with this name exists or not.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spack.environment.environment.initialize_environment_dir">
<span class="sig-prename descclassname"><span class="pre">spack.environment.environment.</span></span><span class="sig-name descname"><span class="pre">initialize_environment_dir</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">environment_dir</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">envfile</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Path</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span></span><a class="reference internal" href="_modules/spack/environment/environment.html#initialize_environment_dir"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.environment.initialize_environment_dir" title="Link to this definition"></a></dt>
<dd><p>Initialize an environment directory starting from an envfile.</p>
<p>Files with suffix .json or .lock are considered lockfiles. Files with any other name
are considered manifest files.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>environment_dir</strong> – directory where the environment should be placed</p></li>
<li><p><strong>envfile</strong> – manifest file or lockfile used to initialize the environment</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#spack.environment.environment.SpackEnvironmentError" title="spack.environment.environment.SpackEnvironmentError"><strong>SpackEnvironmentError</strong></a> – if the directory can’t be initialized</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spack.environment.environment.installed_specs">
<span class="sig-prename descclassname"><span class="pre">spack.environment.environment.</span></span><span class="sig-name descname"><span class="pre">installed_specs</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/spack/environment/environment.html#installed_specs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.environment.installed_specs" title="Link to this definition"></a></dt>
<dd><p>Returns the specs of packages installed in the active environment or None
if no packages are installed.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spack.environment.environment.is_env_dir">
<span class="sig-prename descclassname"><span class="pre">spack.environment.environment.</span></span><span class="sig-name descname"><span class="pre">is_env_dir</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spack/environment/environment.html#is_env_dir"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.environment.is_env_dir" title="Link to this definition"></a></dt>
<dd><p>Whether a directory contains a spack environment.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spack.environment.environment.is_latest_format">
<span class="sig-prename descclassname"><span class="pre">spack.environment.environment.</span></span><span class="sig-name descname"><span class="pre">is_latest_format</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">manifest</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spack/environment/environment.html#is_latest_format"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.environment.is_latest_format" title="Link to this definition"></a></dt>
<dd><p>Return False if the manifest file exists and is not in the latest schema format.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>manifest</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) – manifest file to be analyzed</p>
</dd>
</dl>
</dd></dl>

<dl class="py data">
<dt class="sig sig-object py" id="spack.environment.environment.lockfile_format_version">
<span class="sig-prename descclassname"><span class="pre">spack.environment.environment.</span></span><span class="sig-name descname"><span class="pre">lockfile_format_version</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">5</span></em><a class="headerlink" href="#spack.environment.environment.lockfile_format_version" title="Link to this definition"></a></dt>
<dd><p>version of the lockfile format. Must increase monotonically.</p>
</dd></dl>

<dl class="py data">
<dt class="sig sig-object py" id="spack.environment.environment.lockfile_name">
<span class="sig-prename descclassname"><span class="pre">spack.environment.environment.</span></span><span class="sig-name descname"><span class="pre">lockfile_name</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'spack.lock'</span></em><a class="headerlink" href="#spack.environment.environment.lockfile_name" title="Link to this definition"></a></dt>
<dd><p>Name of the input yaml file for an environment</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spack.environment.environment.make_repo_path">
<span class="sig-prename descclassname"><span class="pre">spack.environment.environment.</span></span><span class="sig-name descname"><span class="pre">make_repo_path</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">root</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spack/environment/environment.html#make_repo_path"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.environment.make_repo_path" title="Link to this definition"></a></dt>
<dd><p>Make a RepoPath from the repo subdirectories in an environment.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spack.environment.environment.manifest_file">
<span class="sig-prename descclassname"><span class="pre">spack.environment.environment.</span></span><span class="sig-name descname"><span class="pre">manifest_file</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">env_name_or_dir</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spack/environment/environment.html#manifest_file"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.environment.manifest_file" title="Link to this definition"></a></dt>
<dd><p>Return the absolute path to a manifest file given the environment
name or directory.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>env_name_or_dir</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) – either the name of a valid environment
or a directory where a manifest file resides</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#AssertionError" title="(in Python v3.13)"><strong>AssertionError</strong></a> – if the environment is not found</p>
</dd>
</dl>
</dd></dl>

<dl class="py data">
<dt class="sig sig-object py" id="spack.environment.environment.manifest_name">
<span class="sig-prename descclassname"><span class="pre">spack.environment.environment.</span></span><span class="sig-name descname"><span class="pre">manifest_name</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'spack.yaml'</span></em><a class="headerlink" href="#spack.environment.environment.manifest_name" title="Link to this definition"></a></dt>
<dd><p>Name of the input yaml file for an environment</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spack.environment.environment.no_active_environment">
<span class="sig-prename descclassname"><span class="pre">spack.environment.environment.</span></span><span class="sig-name descname"><span class="pre">no_active_environment</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/spack/environment/environment.html#no_active_environment"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.environment.no_active_environment" title="Link to this definition"></a></dt>
<dd><p>Deactivate the active environment for the duration of the context. Has no
effect when there is no active environment.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spack.environment.environment.read">
<span class="sig-prename descclassname"><span class="pre">spack.environment.environment.</span></span><span class="sig-name descname"><span class="pre">read</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spack/environment/environment.html#read"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.environment.read" title="Link to this definition"></a></dt>
<dd><p>Get an environment with the supplied name.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spack.environment.environment.root">
<span class="sig-prename descclassname"><span class="pre">spack.environment.environment.</span></span><span class="sig-name descname"><span class="pre">root</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spack/environment/environment.html#root"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.environment.root" title="Link to this definition"></a></dt>
<dd><p>Get the root directory for an environment by name.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spack.environment.environment.set_included_envs_to_env_paths">
<span class="sig-prename descclassname"><span class="pre">spack.environment.environment.</span></span><span class="sig-name descname"><span class="pre">set_included_envs_to_env_paths</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">include_concrete</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.13)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span></span><a class="reference internal" href="_modules/spack/environment/environment.html#set_included_envs_to_env_paths"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.environment.set_included_envs_to_env_paths" title="Link to this definition"></a></dt>
<dd><p>If the included environment(s) is the environment name
it is replaced by the path to the environment</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>include_concrete</strong> – list of env name or path to env</p>
</dd>
</dl>
</dd></dl>

<dl class="py data">
<dt class="sig sig-object py" id="spack.environment.environment.spack_env_var">
<span class="sig-prename descclassname"><span class="pre">spack.environment.environment.</span></span><span class="sig-name descname"><span class="pre">spack_env_var</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'SPACK_ENV'</span></em><a class="headerlink" href="#spack.environment.environment.spack_env_var" title="Link to this definition"></a></dt>
<dd><p>environment variable used to indicate the active environment</p>
</dd></dl>

<dl class="py data">
<dt class="sig sig-object py" id="spack.environment.environment.spack_env_view_var">
<span class="sig-prename descclassname"><span class="pre">spack.environment.environment.</span></span><span class="sig-name descname"><span class="pre">spack_env_view_var</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'SPACK_ENV_VIEW'</span></em><a class="headerlink" href="#spack.environment.environment.spack_env_view_var" title="Link to this definition"></a></dt>
<dd><p>environment variable used to indicate the active environment view</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spack.environment.environment.update_yaml">
<span class="sig-prename descclassname"><span class="pre">spack.environment.environment.</span></span><span class="sig-name descname"><span class="pre">update_yaml</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">manifest</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">backup_file</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spack/environment/environment.html#update_yaml"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.environment.update_yaml" title="Link to this definition"></a></dt>
<dd><p>Update a manifest file from an old format to the current one.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>manifest</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) – path to a manifest file</p></li>
<li><p><strong>backup_file</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) – file where to copy the original manifest</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>True if the manifest was updated, False otherwise.</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#AssertionError" title="(in Python v3.13)"><strong>AssertionError</strong></a> – in case anything goes wrong during the update</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spack.environment.environment.valid_env_name">
<span class="sig-prename descclassname"><span class="pre">spack.environment.environment.</span></span><span class="sig-name descname"><span class="pre">valid_env_name</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spack/environment/environment.html#valid_env_name"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.environment.valid_env_name" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py data">
<dt class="sig sig-object py" id="spack.environment.environment.valid_environment_name_re">
<span class="sig-prename descclassname"><span class="pre">spack.environment.environment.</span></span><span class="sig-name descname"><span class="pre">valid_environment_name_re</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'^\\w[\\w-]*$'</span></em><a class="headerlink" href="#spack.environment.environment.valid_environment_name_re" title="Link to this definition"></a></dt>
<dd><p>regex for validating enviroment names</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spack.environment.environment.validate_env_name">
<span class="sig-prename descclassname"><span class="pre">spack.environment.environment.</span></span><span class="sig-name descname"><span class="pre">validate_env_name</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spack/environment/environment.html#validate_env_name"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.environment.validate_env_name" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spack.environment.environment.validate_included_envs_concrete">
<span class="sig-prename descclassname"><span class="pre">spack.environment.environment.</span></span><span class="sig-name descname"><span class="pre">validate_included_envs_concrete</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">include_concrete</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.13)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span></span><a class="reference internal" href="_modules/spack/environment/environment.html#validate_included_envs_concrete"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.environment.validate_included_envs_concrete" title="Link to this definition"></a></dt>
<dd><p>Checks that all of the included environments are concrete</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>include_concrete</strong> – list of already existing concrete environments to include</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#spack.environment.environment.SpackEnvironmentError" title="spack.environment.environment.SpackEnvironmentError"><strong>SpackEnvironmentError</strong></a> – if any of the included environments are not concrete</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spack.environment.environment.validate_included_envs_exists">
<span class="sig-prename descclassname"><span class="pre">spack.environment.environment.</span></span><span class="sig-name descname"><span class="pre">validate_included_envs_exists</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">include_concrete</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.13)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span></span><a class="reference internal" href="_modules/spack/environment/environment.html#validate_included_envs_exists"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.environment.validate_included_envs_exists" title="Link to this definition"></a></dt>
<dd><p>Checks that all of the included environments exist</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>include_concrete</strong> – list of already existing concrete environments to include</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#spack.environment.environment.SpackEnvironmentError" title="spack.environment.environment.SpackEnvironmentError"><strong>SpackEnvironmentError</strong></a> – if any of the included environments do not exist</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spack.environment.environment.yaml_equivalent">
<span class="sig-prename descclassname"><span class="pre">spack.environment.environment.</span></span><span class="sig-name descname"><span class="pre">yaml_equivalent</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">first</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">second</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a></span></span><a class="reference internal" href="_modules/spack/environment/environment.html#yaml_equivalent"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.environment.yaml_equivalent" title="Link to this definition"></a></dt>
<dd><p>Returns whether two spack yaml items are equivalent, including overrides</p>
</dd></dl>

</section>
<section id="module-spack.environment.shell">
<span id="spack-environment-shell-module"></span><h2>spack.environment.shell module<a class="headerlink" href="#module-spack.environment.shell" title="Link to this heading"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="spack.environment.shell.activate">
<span class="sig-prename descclassname"><span class="pre">spack.environment.shell.</span></span><span class="sig-name descname"><span class="pre">activate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">env</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#spack.environment.environment.Environment" title="spack.environment.environment.Environment"><span class="pre">Environment</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_env_repo</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">view</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'default'</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="spack.util.html#spack.util.environment.EnvironmentModifications" title="spack.util.environment.EnvironmentModifications"><span class="pre">EnvironmentModifications</span></a></span></span><a class="reference internal" href="_modules/spack/environment/shell.html#activate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.shell.activate" title="Link to this definition"></a></dt>
<dd><p>Activate an environment and append environment modifications</p>
<p>To activate an environment, we add its configuration scope to the
existing Spack configuration, and we set active to the current
environment.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>env</strong> – the environment to activate</p></li>
<li><p><strong>use_env_repo</strong> – use the packages exactly as they appear in the environment’s repository</p></li>
<li><p><strong>view</strong> – generate commands to add runtime environment variables for named view</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Environment variables
modifications to activate environment.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="spack.util.html#spack.util.environment.EnvironmentModifications" title="spack.util.environment.EnvironmentModifications">spack.util.environment.EnvironmentModifications</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spack.environment.shell.activate_header">
<span class="sig-prename descclassname"><span class="pre">spack.environment.shell.</span></span><span class="sig-name descname"><span class="pre">activate_header</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">env</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shell</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prompt</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">view</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spack/environment/shell.html#activate_header"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.shell.activate_header" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spack.environment.shell.deactivate">
<span class="sig-prename descclassname"><span class="pre">spack.environment.shell.</span></span><span class="sig-name descname"><span class="pre">deactivate</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="spack.util.html#spack.util.environment.EnvironmentModifications" title="spack.util.environment.EnvironmentModifications"><span class="pre">EnvironmentModifications</span></a></span></span><a class="reference internal" href="_modules/spack/environment/shell.html#deactivate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.shell.deactivate" title="Link to this definition"></a></dt>
<dd><p>Deactivate an environment and collect corresponding environment modifications.</p>
<dl class="simple">
<dt>Note: unloads the environment in its current state, not in the state it was</dt><dd><p>loaded in, meaning that specs that were removed from the spack environment
after activation are not unloaded.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Environment variables modifications to activate environment.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spack.environment.shell.deactivate_header">
<span class="sig-prename descclassname"><span class="pre">spack.environment.shell.</span></span><span class="sig-name descname"><span class="pre">deactivate_header</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">shell</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spack/environment/shell.html#deactivate_header"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spack.environment.shell.deactivate_header" title="Link to this definition"></a></dt>
<dd></dd></dl>

</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="spack.detection.html" class="btn btn-neutral float-left" title="spack.detection package" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="spack.hooks.html" class="btn btn-neutral float-right" title="spack.hooks package" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2013-2023, Lawrence Livermore National Laboratory..
      <span class="lastupdated">Last updated on Sep 20, 2025.
      </span></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>